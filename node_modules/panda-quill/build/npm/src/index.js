"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.abort = exports.print = exports.run = exports.rmr = exports.rmR = exports.rmDir = exports.rmdir = exports.rm = exports.mv = exports.cp = exports.chDir = exports.chdir = exports.mkDirP = exports.mkdirp = exports.mkDir = exports.mkdir = exports.glob = exports.lsr = exports.lsR = exports.ls = exports.readDir = exports.readdir = exports.isDirectory = exports.isFile = exports.isWritable = exports.isReadable = exports.exists = exports.exist = exports.stat = exports.write = exports.read = void 0;

var _util = require("util");

var _child_process = require("child_process");

var _path2 = require("path");

var _stream = _interopRequireDefault(require("stream"));

var _pandaGarden = require("panda-garden");

var _pandaParchment = require("panda-parchment");

var _pandaGenerics = _interopRequireDefault(require("panda-generics"));

var _fs = _interopRequireDefault(require("fs"));

var _minimatch = _interopRequireDefault(require("minimatch"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var FS,
    abort,
    chDir,
    chdir,
    cp,
    create,
    define,
    exist,
    exists,
    glob,
    isDirectory,
    isFile,
    isReadable,
    isWritable,
    ls,
    lsR,
    lsr,
    mkDir,
    mkDirP,
    mkdir,
    mkdirp,
    mv,
    print,
    read,
    readBinaryStream,
    readBuffer,
    readDir,
    readStream,
    readdir,
    rm,
    rmDir,
    rmR,
    rmdir,
    rmr,
    run,
    stat,
    write,
    indexOf = [].indexOf;
exports.write = write;
exports.stat = stat;
exports.run = run;
exports.rmr = rmr;
exports.rmdir = rmdir;
exports.rmR = rmR;
exports.rmDir = rmDir;
exports.rm = rm;
exports.readdir = readdir;
exports.readDir = readDir;
exports.read = read;
exports.print = print;
exports.mv = mv;
exports.mkdirp = mkdirp;
exports.mkdir = mkdir;
exports.mkDirP = mkDirP;
exports.mkDir = mkDir;
exports.lsr = lsr;
exports.lsR = lsR;
exports.ls = ls;
exports.isWritable = isWritable;
exports.isReadable = isReadable;
exports.isFile = isFile;
exports.isDirectory = isDirectory;
exports.glob = glob;
exports.exists = exists;
exports.exist = exist;
exports.cp = cp;
exports.chdir = chdir;
exports.chDir = chDir;
exports.abort = abort;
({
  create,
  define
} = _pandaGenerics.default);

FS = function (result) {
  var key, value;

  for (key in _fs.default) {
    value = _fs.default[key];
    result[key] = (0, _pandaParchment.isFunction)(value) ? (0, _util.promisify)(value) : value;
  }

  return result;
}({}); // we're going to export this


({
  stat
} = FS);
exports.stat = stat;

exports.exists = exists = exports.exist = exist = async function (path) {
  try {
    return (await FS.stat(path)) != null;
  } catch (error1) {
    return false;
  }
};

exports.isDirectory = isDirectory = async function (path) {
  try {
    return (await FS.stat(path)).isDirectory();
  } catch (error1) {
    return false;
  }
};

exports.isFile = isFile = async function (path) {
  try {
    return (await FS.stat(path)).isFile();
  } catch (error1) {
    return false;
  }
};

exports.isReadable = isReadable = function (x) {
  var ref;
  return (x != null ? (ref = x.read) != null ? ref.call : void 0 : void 0) != null;
}; // socket-based streams are duplex streams
// and do not inherit from stream.writable


exports.isWritable = isWritable = function (x) {
  var ref;
  return (x != null ? (ref = x.write) != null ? ref.call : void 0 : void 0) != null;
};

exports.read = read = create({
  name: "read",
  description: "reads data from file, string, or stream"
});
define(read, _pandaParchment.isString, _pandaParchment.isString, function (path, encoding) {
  return FS.readFile(path, encoding);
});
define(read, _pandaParchment.isString, function (path) {
  return read(path, 'utf8');
});

readBuffer = function (path) {
  return FS.readFile(path);
};

define(read, _pandaParchment.isString, (0, _pandaParchment.eq)(void 0), readBuffer);
define(read, _pandaParchment.isString, (0, _pandaParchment.eq)("binary"), readBuffer);
define(read, _pandaParchment.isString, (0, _pandaParchment.eq)("buffer"), readBuffer); // Stringifies a stream's buffer according to the given encoding.

readStream = function (stream, encoding = "utf8") {
  var buffer;
  buffer = "";
  return (0, _pandaParchment.promise)(function (resolve, reject) {
    stream.on("data", function (data) {
      return buffer += data.toString(encoding);
    });
    stream.on("end", function () {
      return resolve(buffer);
    });
    return stream.on("error", function (error) {
      return reject(error);
    });
  });
}; // Extracts a stream's raw buffer.


readBinaryStream = function (stream) {
  var buffer;
  buffer = new Buffer(0);
  return (0, _pandaParchment.promise)(function (resolve, reject) {
    stream.on("data", function (data) {
      return buffer = Buffer.concat([buffer, data]);
    });
    stream.on("end", function () {
      return resolve(buffer);
    });
    return stream.on("error", function (error) {
      return reject(error);
    });
  });
};

define(read, isReadable, readStream);
define(read, isReadable, _pandaParchment.isString, readStream);
define(read, isReadable, (0, _pandaParchment.eq)(void 0), readBinaryStream);
define(read, isReadable, (0, _pandaParchment.eq)("binary"), readBinaryStream);
define(read, isReadable, (0, _pandaParchment.eq)("buffer"), readBinaryStream);
exports.write = write = create({
  name: "write",
  description: "writes data to file or stream"
});
define(write, _pandaParchment.isString, _pandaParchment.isBuffer, function (path, buffer) {
  return FS.writeFile(path, buffer);
});
define(write, _pandaParchment.isString, _pandaParchment.isString, function (path, content) {
  return FS.writeFile(path, content);
});
define(write, _pandaParchment.isString, isReadable, function (path, stream) {
  return stream.pipe(_fs.default.createWriteStream(path));
});
define(write, isWritable, _pandaParchment.isString, function (stream, content) {
  return (0, _pandaParchment.promise)(function (resolve, reject) {
    return stream.write(content, "utf-8", function (error) {
      if (error == null) {
        return resolve();
      } else {
        return reject(error);
      }
    });
  });
});
exports.write = write = (0, _pandaGarden.curry)((0, _pandaGarden.binary)(write));

exports.readdir = readdir = exports.readDir = readDir = function (path) {
  return FS.readdir(path);
};

exports.ls = ls = async function (path) {
  var file, i, len, ref, results;
  ref = await readdir(path);
  results = [];

  for (i = 0, len = ref.length; i < len; i++) {
    file = ref[i];
    results.push((0, _path2.join)(path, file));
  }

  return results;
};

exports.lsR = lsR = exports.lsr = lsr = async function (path, visited = []) {
  var child, children, i, len;
  children = await ls(path);

  for (i = 0, len = children.length; i < len; i++) {
    child = children[i];

    if (!(indexOf.call(visited, child) >= 0)) {
      if (await isDirectory(child)) {
        await lsR(child, visited);
      } else {
        visited.push(child);
      }
    }
  }

  return visited;
};

exports.rmR = rmR = exports.rmr = rmr = async function (path) {
  var _path, i, len, paths;

  if (await isDirectory(path)) {
    paths = await ls(path);

    for (i = 0, len = paths.length; i < len; i++) {
      _path = paths[i];
      await rmr(_path);
    }

    return await rmDir(path);
  } else if (await isFile(path)) {
    return await rm(path);
  }
};

exports.glob = glob = async function (pattern, path) {
  return _minimatch.default.match((await lsR(path)), (0, _path2.join)(path, pattern));
};

exports.chDir = chDir = exports.chdir = chdir = create({
  name: "chdir",
  description: "Changes the working directory and makes it easy to return."
});
define(chdir, _pandaParchment.isString, function (path) {
  var cwd;
  cwd = process.cwd();
  process.chdir(path);
  return function () {
    return process.chdir(cwd);
  };
});
define(chdir, _pandaParchment.isString, _pandaParchment.isFunction, function (path, f) {
  var restore;
  restore = chdir(path);
  f();
  return restore();
});

exports.rm = rm = function (path) {
  return FS.unlink(path);
};

exports.mv = mv = (0, _pandaGarden.curry)((0, _pandaGarden.binary)(function (old, _new) {
  return FS.rename(old, _new);
}));
exports.cp = cp = (0, _pandaGarden.curry)((0, _pandaGarden.binary)(function (old, _new) {
  return (0, _pandaParchment.promise)(function (resolve, reject) {
    return _fs.default.createReadStream(old).pipe(_fs.default.createWriteStream(_new)).on("error", function (error) {
      return reject(error);
    }).on("close", function () {
      return resolve();
    });
  });
}));

exports.rmDir = rmDir = exports.rmdir = rmdir = function (path) {
  return FS.rmdir(path);
};

exports.mkDir = mkDir = exports.mkdir = mkdir = (0, _pandaGarden.curry)((0, _pandaGarden.binary)(function (mode, path) {
  return FS.mkdir(path, mode);
}));
exports.mkDirP = mkDirP = exports.mkdirp = mkdirp = (0, _pandaGarden.curry)((0, _pandaGarden.binary)(async function (mode, path) {
  var error, parent;

  if (!(await exists(path))) {
    parent = (0, _path2.dirname)(path);

    if (!(await exists(parent))) {
      await mkdirp(mode, parent);
    }

    try {
      return await mkdir(mode, path);
    } catch (error1) {
      error = error1;

      if (error.code !== "EEXIST") {
        throw error;
      }
    }
  }
}));

exports.abort = abort = function (message) {
  if (message != null) {
    console.error(message);
  }

  return process.exit(-1);
};

exports.run = run = function (command) {
  return (0, _pandaParchment.promise)(function (resolve, reject) {
    return (0, _child_process.exec)(command, function (error, stdout, stderr) {
      if (error) {
        return reject(error);
      } else {
        return resolve({
          stdout,
          stderr
        });
      }
    });
  });
};

exports.print = print = function ({
  stdout,
  stderr
}) {
  if (stdout.length > 0) {
    process.stdout.write(stdout);
  }

  if (stderr.length > 0) {
    return process.stderr.write(stderr);
  }
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9kYXZpZC9yZXBvcy9wYW5kYS1xdWlsbC9zcmMvaW5kZXguY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFFQTs7QUFDQTs7QUFDQTs7OztBQVRBLElBQUEsRUFBQTtBQUFBLElBQUEsS0FBQTtBQUFBLElBQUEsS0FBQTtBQUFBLElBQUEsS0FBQTtBQUFBLElBQUEsRUFBQTtBQUFBLElBQUEsTUFBQTtBQUFBLElBQUEsTUFBQTtBQUFBLElBQUEsS0FBQTtBQUFBLElBQUEsTUFBQTtBQUFBLElBQUEsSUFBQTtBQUFBLElBQUEsV0FBQTtBQUFBLElBQUEsTUFBQTtBQUFBLElBQUEsVUFBQTtBQUFBLElBQUEsVUFBQTtBQUFBLElBQUEsRUFBQTtBQUFBLElBQUEsR0FBQTtBQUFBLElBQUEsR0FBQTtBQUFBLElBQUEsS0FBQTtBQUFBLElBQUEsTUFBQTtBQUFBLElBQUEsS0FBQTtBQUFBLElBQUEsTUFBQTtBQUFBLElBQUEsRUFBQTtBQUFBLElBQUEsS0FBQTtBQUFBLElBQUEsSUFBQTtBQUFBLElBQUEsZ0JBQUE7QUFBQSxJQUFBLFVBQUE7QUFBQSxJQUFBLE9BQUE7QUFBQSxJQUFBLFVBQUE7QUFBQSxJQUFBLE9BQUE7QUFBQSxJQUFBLEVBQUE7QUFBQSxJQUFBLEtBQUE7QUFBQSxJQUFBLEdBQUE7QUFBQSxJQUFBLEtBQUE7QUFBQSxJQUFBLEdBQUE7QUFBQSxJQUFBLEdBQUE7QUFBQSxJQUFBLElBQUE7QUFBQSxJQUFBLEtBQUE7QUFBQSxJQUFBLE9BQUEsR0FBQSxHQUFBLE9BQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBV0EsQ0FBQTtBQUFBLEVBQUEsTUFBQTtBQUFBLEVBQUE7QUFBQSxJQUFBLHNCQUFBOztBQUVBLEVBQUEsR0FBUSxVQUFBLE1BQUEsRUFBQTtBQUNOLE1BQUEsR0FBQSxFQUFBLEtBQUE7O0FBQUEsT0FBQSxHQUFBLElBQUEsV0FBQSxFQUFBOztBQUNFLElBQUEsTUFBTyxDQUFQLEdBQU8sQ0FBUCxHQUFpQixnQ0FBSCxLQUFHLElBQXVCLHFCQUExQixLQUEwQixDQUF2QixHQUE2QyxLQUE5RDtBQURGOztTQUVBLE07QUFIRyxDQUFHLENBYlIsRUFhUSxDQUFSLEM7OztBQU9BLENBQUE7QUFBQSxFQUFBO0FBQUEsSUFBQSxFQUFBOzs7QUFFQSxpQkFBQSxNQUFBLG1CQUFTLEtBQUEsR0FBUyxnQkFBQSxJQUFBLEVBQUE7QUFDaEIsTUFBQTtXQUNFLENBQUEsTUFBQSxFQUFBLENBQUEsSUFBQSxDQUFBLElBQUEsQ0FBQSxLQURGLEk7QUFBQSxHQUFBLENBQUEsT0FBQSxNQUFBLEVBQUE7V0FBQSxLOztBQURnQixDQUFsQjs7QUFNQSxzQkFBQSxXQUFBLEdBQWUsZ0JBQUEsSUFBQSxFQUFBO0FBQ2IsTUFBQTtXQUNFLENBQUMsTUFBTSxFQUFFLENBQUYsSUFBQSxDQUFQLElBQU8sQ0FBUCxFQURGLFdBQ0UsRTtBQURGLEdBQUEsQ0FBQSxPQUFBLE1BQUEsRUFBQTtXQUFBLEs7O0FBRGEsQ0FBZjs7QUFNQSxpQkFBQSxNQUFBLEdBQVUsZ0JBQUEsSUFBQSxFQUFBO0FBQ1IsTUFBQTtXQUNFLENBQUMsTUFBTSxFQUFFLENBQUYsSUFBQSxDQUFQLElBQU8sQ0FBUCxFQURGLE1BQ0UsRTtBQURGLEdBQUEsQ0FBQSxPQUFBLE1BQUEsRUFBQTtXQUFBLEs7O0FBRFEsQ0FBVjs7QUFNQSxxQkFBQSxVQUFBLEdBQWEsVUFBQSxDQUFBLEVBQUE7QUFBTyxNQUFBLEdBQUE7U0FBQSxDQUFBLENBQUEsSUFBQSxJQUFBLEdBQUEsQ0FBQSxHQUFBLEdBQUEsQ0FBQSxDQUFBLElBQUEsS0FBQSxJQUFBLEdBQUEsR0FBQSxDQUFBLElBQUEsR0FBQSxLQUFBLENBQUEsR0FBQSxLQUFBLENBQUEsS0FBQSxJO0FBeENwQixDQXdDQSxDOzs7O0FBSUEscUJBQUEsVUFBQSxHQUFhLFVBQUEsQ0FBQSxFQUFBO0FBQU8sTUFBQSxHQUFBO1NBQUEsQ0FBQSxDQUFBLElBQUEsSUFBQSxHQUFBLENBQUEsR0FBQSxHQUFBLENBQUEsQ0FBQSxLQUFBLEtBQUEsSUFBQSxHQUFBLEdBQUEsQ0FBQSxJQUFBLEdBQUEsS0FBQSxDQUFBLEdBQUEsS0FBQSxDQUFBLEtBQUEsSTtBQUFQLENBQWI7O0FBRUEsZUFBQSxJQUFBLEdBQU8sTUFBQSxDQUNMO0FBQUEsRUFBQSxJQUFBLEVBQUEsTUFBQTtBQUNBLEVBQUEsV0FBQSxFQUFhO0FBRGIsQ0FESyxDQUFQO0FBSUEsTUFBQSxDQUFBLElBQUEsRUFBQSx3QkFBQSxFQUFBLHdCQUFBLEVBQ0UsVUFBQSxJQUFBLEVBQUEsUUFBQSxFQUFBO1NBQ0UsRUFBRSxDQUFGLFFBQUEsQ0FBQSxJQUFBLEVBQUEsUUFBQSxDO0FBRkosQ0FBQSxDQUFBO0FBSUEsTUFBQSxDQUFBLElBQUEsRUFBQSx3QkFBQSxFQUF1QixVQUFBLElBQUEsRUFBQTtTQUFVLElBQUEsQ0FBQSxJQUFBLEVBQUEsTUFBQSxDO0FBQWpDLENBQUEsQ0FBQTs7QUFFQSxVQUFBLEdBQWEsVUFBQSxJQUFBLEVBQUE7U0FBVSxFQUFFLENBQUYsUUFBQSxDQUFBLElBQUEsQztBQUFWLENBQWI7O0FBQ0EsTUFBQSxDQUFBLElBQUEsRUFBQSx3QkFBQSxFQUF3Qix3QkFBRyxLQUEzQixDQUF3QixDQUF4QixFQUFBLFVBQUEsQ0FBQTtBQUNBLE1BQUEsQ0FBQSxJQUFBLEVBQUEsd0JBQUEsRUFBd0Isd0JBQXhCLFFBQXdCLENBQXhCLEVBQUEsVUFBQSxDQUFBO0FBQ0EsTUFBQSxDQUFBLElBQUEsRUFBQSx3QkFBQSxFQUF3Qix3QkFBeEIsUUFBd0IsQ0FBeEIsRUEzREEsVUEyREEsQ0FBQSxDOztBQUdBLFVBQUEsR0FBYSxVQUFBLE1BQUEsRUFBUyxRQUFBLEdBQVQsTUFBQSxFQUFBO0FBQ1gsTUFBQSxNQUFBO0FBQUEsRUFBQSxNQUFBLEdBQVMsRUFBVDtTQUNBLDZCQUFRLFVBQUEsT0FBQSxFQUFBLE1BQUEsRUFBQTtBQUNOLElBQUEsTUFBTSxDQUFOLEVBQUEsQ0FBQSxNQUFBLEVBQWtCLFVBQUEsSUFBQSxFQUFBO2FBQVUsTUFBQSxJQUFVLElBQUksQ0FBSixRQUFBLENBQUEsUUFBQSxDO0FBQXRDLEtBQUE7QUFDQSxJQUFBLE1BQU0sQ0FBTixFQUFBLENBQUEsS0FBQSxFQUFpQixZQUFBO2FBQUcsT0FBQSxDQUFBLE1BQUEsQztBQUFwQixLQUFBO1dBQ0EsTUFBTSxDQUFOLEVBQUEsQ0FBQSxPQUFBLEVBQW1CLFVBQUEsS0FBQSxFQUFBO2FBQVcsTUFBQSxDQUFBLEtBQUEsQztBQUE5QixLQUFBLEM7QUFIRixHQUFBLEM7QUFoRUYsQ0E4REEsQzs7O0FBUUEsZ0JBQUEsR0FBbUIsVUFBQSxNQUFBLEVBQUE7QUFDakIsTUFBQSxNQUFBO0FBQUEsRUFBQSxNQUFBLEdBQVMsSUFBQSxNQUFBLENBQUEsQ0FBQSxDQUFUO1NBQ0EsNkJBQVEsVUFBQSxPQUFBLEVBQUEsTUFBQSxFQUFBO0FBQ04sSUFBQSxNQUFNLENBQU4sRUFBQSxDQUFBLE1BQUEsRUFBa0IsVUFBQSxJQUFBLEVBQUE7YUFBVSxNQUFBLEdBQVMsTUFBTSxDQUFOLE1BQUEsQ0FBYyxDQUFBLE1BQUEsRUFBZCxJQUFjLENBQWQsQztBQUFyQyxLQUFBO0FBQ0EsSUFBQSxNQUFNLENBQU4sRUFBQSxDQUFBLEtBQUEsRUFBaUIsWUFBQTthQUFHLE9BQUEsQ0FBQSxNQUFBLEM7QUFBcEIsS0FBQTtXQUNBLE1BQU0sQ0FBTixFQUFBLENBQUEsT0FBQSxFQUFtQixVQUFBLEtBQUEsRUFBQTthQUFXLE1BQUEsQ0FBQSxLQUFBLEM7QUFBOUIsS0FBQSxDO0FBSEYsR0FBQSxDO0FBRmlCLENBQW5COztBQU9BLE1BQUEsQ0FBQSxJQUFBLEVBQUEsVUFBQSxFQUFBLFVBQUEsQ0FBQTtBQUNBLE1BQUEsQ0FBQSxJQUFBLEVBQUEsVUFBQSxFQUFBLHdCQUFBLEVBQUEsVUFBQSxDQUFBO0FBQ0EsTUFBQSxDQUFBLElBQUEsRUFBQSxVQUFBLEVBQTBCLHdCQUFHLEtBQTdCLENBQTBCLENBQTFCLEVBQUEsZ0JBQUEsQ0FBQTtBQUNBLE1BQUEsQ0FBQSxJQUFBLEVBQUEsVUFBQSxFQUEwQix3QkFBMUIsUUFBMEIsQ0FBMUIsRUFBQSxnQkFBQSxDQUFBO0FBQ0EsTUFBQSxDQUFBLElBQUEsRUFBQSxVQUFBLEVBQTBCLHdCQUExQixRQUEwQixDQUExQixFQUFBLGdCQUFBLENBQUE7QUFFQSxnQkFBQSxLQUFBLEdBQVEsTUFBQSxDQUNOO0FBQUEsRUFBQSxJQUFBLEVBQUEsT0FBQTtBQUNBLEVBQUEsV0FBQSxFQUFhO0FBRGIsQ0FETSxDQUFSO0FBSUEsTUFBQSxDQUFBLEtBQUEsRUFBQSx3QkFBQSxFQUFBLHdCQUFBLEVBQ0UsVUFBQSxJQUFBLEVBQUEsTUFBQSxFQUFBO1NBQWtCLEVBQUUsQ0FBRixTQUFBLENBQUEsSUFBQSxFQUFBLE1BQUEsQztBQURwQixDQUFBLENBQUE7QUFHQSxNQUFBLENBQUEsS0FBQSxFQUFBLHdCQUFBLEVBQUEsd0JBQUEsRUFDRSxVQUFBLElBQUEsRUFBQSxPQUFBLEVBQUE7U0FBbUIsRUFBRSxDQUFGLFNBQUEsQ0FBQSxJQUFBLEVBQUEsT0FBQSxDO0FBRHJCLENBQUEsQ0FBQTtBQUdBLE1BQUEsQ0FBQSxLQUFBLEVBQUEsd0JBQUEsRUFBQSxVQUFBLEVBQ0UsVUFBQSxJQUFBLEVBQUEsTUFBQSxFQUFBO1NBQWtCLE1BQU0sQ0FBTixJQUFBLENBQVksWUFBQSxpQkFBQSxDQUFaLElBQVksQ0FBWixDO0FBRHBCLENBQUEsQ0FBQTtBQUdBLE1BQUEsQ0FBQSxLQUFBLEVBQUEsVUFBQSxFQUFBLHdCQUFBLEVBQ0UsVUFBQSxNQUFBLEVBQUEsT0FBQSxFQUFBO1NBQ0UsNkJBQVEsVUFBQSxPQUFBLEVBQUEsTUFBQSxFQUFBO1dBQ04sTUFBTSxDQUFOLEtBQUEsQ0FBQSxPQUFBLEVBQUEsT0FBQSxFQUErQixVQUFBLEtBQUEsRUFBQTtBQUM3QixVQUFJLEtBQUEsSUFBSixJQUFBLEVBQUE7ZUFDRSxPQURGLEU7QUFBQSxPQUFBLE1BQUE7ZUFHRSxNQUFBLENBSEYsS0FHRSxDOztBQUpKLEtBQUEsQztBQURGLEdBQUEsQztBQUZKLENBQUEsQ0FBQTtBQVNBLGdCQUFBLEtBQUEsR0FBUSx3QkFBTSx5QkFBTixLQUFNLENBQU4sQ0FBUjs7QUFFQSxrQkFBQSxPQUFBLHFCQUFVLE9BQUEsR0FBVSxVQUFBLElBQUEsRUFBQTtTQUFVLEVBQUUsQ0FBRixPQUFBLENBQUEsSUFBQSxDO0FBQVYsQ0FBcEI7O0FBRUEsYUFBQSxFQUFBLEdBQU0sZ0JBQUEsSUFBQSxFQUFBO0FBQ0osTUFBQSxJQUFBLEVBQUEsQ0FBQSxFQUFBLEdBQUEsRUFBQSxHQUFBLEVBQUEsT0FBQTtBQUFrQixFQUFBLEdBQUEsR0FBQSxNQUFBLE9BQUEsQ0FBQSxJQUFBLENBQUE7QUFBQSxFQUFBLE9BQUEsR0FBQSxFQUFBOztBQUFBLE9BQUEsQ0FBQSxHQUFBLENBQUEsRUFBQSxHQUFBLEdBQUEsR0FBQSxDQUFBLE1BQUEsRUFBQSxDQUFBLEdBQUEsR0FBQSxFQUFBLENBQUEsRUFBQSxFQUFBOztpQkFBakIsaUJBQUEsSUFBQSxFQUFBLElBQUEsQztBQUFpQjs7O0FBRGQsQ0FBTjs7QUFHQSxjQUFBLEdBQUEsaUJBQU0sR0FBQSxHQUFPLGdCQUFBLElBQUEsRUFBTyxPQUFBLEdBQVAsRUFBQSxFQUFBO0FBQ1gsTUFBQSxLQUFBLEVBQUEsUUFBQSxFQUFBLENBQUEsRUFBQSxHQUFBO0FBQUEsRUFBQSxRQUFBLEdBQVcsTUFBTSxFQUFBLENBQU4sSUFBTSxDQUFqQjs7QUFDQSxPQUFBLENBQUEsR0FBQSxDQUFBLEVBQUEsR0FBQSxHQUFBLFFBQUEsQ0FBQSxNQUFBLEVBQUEsQ0FBQSxHQUFBLEdBQUEsRUFBQSxDQUFBLEVBQUEsRUFBQTs7O1FBQTJCLEVBQUUsT0FBQSxDQUFBLElBQUEsQ0FBQSxPQUFBLEVBQUEsS0FBQSxLQUFELENBQUQsQyxFQUFDO0FBQzFCLFVBQUcsTUFBTSxXQUFBLENBQVQsS0FBUyxDQUFULEVBQUE7QUFDRSxjQUFNLEdBQUEsQ0FBQSxLQUFBLEVBRFIsT0FDUSxDQUFOO0FBREYsT0FBQSxNQUFBO0FBR0UsUUFBQSxPQUFPLENBQVAsSUFBQSxDQUhGLEtBR0U7OztBQUpKOztTQUtBLE87QUFQVyxDQUFiOztBQVNBLGNBQUEsR0FBQSxpQkFBTSxHQUFBLEdBQU0sZ0JBQUEsSUFBQSxFQUFBO0FBQ1YsTUFBQSxLQUFBLEVBQUEsQ0FBQSxFQUFBLEdBQUEsRUFBQSxLQUFBOztBQUFBLE1BQUksTUFBTSxXQUFBLENBQVYsSUFBVSxDQUFWLEVBQUE7QUFDRSxJQUFBLEtBQUEsR0FBUSxNQUFNLEVBQUEsQ0FBTixJQUFNLENBQWQ7O0FBQ2tCLFNBQUEsQ0FBQSxHQUFBLENBQUEsRUFBQSxHQUFBLEdBQUEsS0FBQSxDQUFBLE1BQUEsRUFBQSxDQUFBLEdBQUEsR0FBQSxFQUFBLENBQUEsRUFBQSxFQUFBOztBQUFqQixZQUFNLEdBQUEsQ0FBTixLQUFNLENBQU47QUFBaUI7O0FBQ2xCLFdBQUEsTUFBTSxLQUFBLENBSFIsSUFHUSxDQUFOO0FBSEYsR0FBQSxNQUlLLElBQUksTUFBTSxNQUFBLENBQVYsSUFBVSxDQUFWLEVBQUE7QUFDSCxXQUFBLE1BQU0sRUFBQSxDQURILElBQ0csQ0FBTjs7QUFOUSxDQUFaOztBQVFBLGVBQUEsSUFBQSxHQUFRLGdCQUFBLE9BQUEsRUFBQSxJQUFBLEVBQUE7U0FDTixtQkFBQSxLQUFBLEVBQWlCLE1BQU0sR0FBQSxDQUF2QixJQUF1QixDQUF2QixHQUFtQyxpQkFBQSxJQUFBLEVBQW5DLE9BQW1DLENBQW5DLEM7QUFETSxDQUFSOztBQUdBLGdCQUFBLEtBQUEsbUJBQVEsS0FBQSxHQUFRLE1BQUEsQ0FDZDtBQUFBLEVBQUEsSUFBQSxFQUFBLE9BQUE7QUFDQSxFQUFBLFdBQUEsRUFBYTtBQURiLENBRGMsQ0FBaEI7QUFJQSxNQUFBLENBQUEsS0FBQSxFQUFBLHdCQUFBLEVBQXdCLFVBQUEsSUFBQSxFQUFBO0FBQ3RCLE1BQUEsR0FBQTtBQUFBLEVBQUEsR0FBQSxHQUFNLE9BQU8sQ0FBUCxHQUFBLEVBQU47QUFDQSxFQUFBLE9BQU8sQ0FBUCxLQUFBLENBQUEsSUFBQTtTQUNBLFlBQUE7V0FBRyxPQUFPLENBQVAsS0FBQSxDQUFBLEdBQUEsQztBQUFILEc7QUFIRixDQUFBLENBQUE7QUFLQSxNQUFBLENBQUEsS0FBQSxFQUFBLHdCQUFBLEVBQUEsMEJBQUEsRUFBb0MsVUFBQSxJQUFBLEVBQUEsQ0FBQSxFQUFBO0FBQ2xDLE1BQUEsT0FBQTtBQUFBLEVBQUEsT0FBQSxHQUFVLEtBQUEsQ0FBQSxJQUFBLENBQVY7QUFDQSxFQUFBLENBQUE7U0FDQSxPQUFBLEU7QUFIRixDQUFBLENBQUE7O0FBS0EsYUFBQSxFQUFBLEdBQUssVUFBQSxJQUFBLEVBQUE7U0FBVSxFQUFFLENBQUYsTUFBQSxDQUFBLElBQUEsQztBQUFWLENBQUw7O0FBRUEsYUFBQSxFQUFBLEdBQUssd0JBQU0seUJBQU8sVUFBQSxHQUFBLEVBQUEsSUFBQSxFQUFBO1NBQWUsRUFBRSxDQUFGLE1BQUEsQ0FBQSxHQUFBLEVBQUEsSUFBQSxDO0FBQTVCLENBQU0sQ0FBTixDQUFMO0FBRUEsYUFBQSxFQUFBLEdBQUssd0JBQU0seUJBQU8sVUFBQSxHQUFBLEVBQUEsSUFBQSxFQUFBO1NBQ2hCLDZCQUFRLFVBQUEsT0FBQSxFQUFBLE1BQUEsRUFBQTtXQUNMLFlBQUEsZ0JBQUEsQ0FBRCxHQUFDLENBQUQsQ0FBQSxJQUFBLENBQ00sWUFBQSxpQkFBQSxDQUROLElBQ00sQ0FETixFQUFBLEVBQUEsQ0FBQSxPQUFBLEVBRWEsVUFBQSxLQUFBLEVBQUE7YUFBVyxNQUFBLENBQUEsS0FBQSxDO0FBRnhCLEtBQUEsRUFBQSxFQUFBLENBQUEsT0FBQSxFQUdhLFlBQUE7YUFBRyxPQUFBLEU7QUFIaEIsS0FBQSxDO0FBREYsR0FBQSxDO0FBREcsQ0FBTSxDQUFOLENBQUw7O0FBT0EsZ0JBQUEsS0FBQSxtQkFBUSxLQUFBLEdBQVEsVUFBQSxJQUFBLEVBQUE7U0FBVSxFQUFFLENBQUYsS0FBQSxDQUFBLElBQUEsQztBQUFWLENBQWhCOztBQUVBLGdCQUFBLEtBQUEsbUJBQVEsS0FBQSxHQUFRLHdCQUFNLHlCQUFPLFVBQUEsSUFBQSxFQUFBLElBQUEsRUFBQTtTQUFnQixFQUFFLENBQUYsS0FBQSxDQUFBLElBQUEsRUFBQSxJQUFBLEM7QUFBN0IsQ0FBTSxDQUFOLENBQWhCO0FBRUEsaUJBQUEsTUFBQSxvQkFBUyxNQUFBLEdBQVMsd0JBQU0seUJBQVEsZ0JBQUEsSUFBQSxFQUFBLElBQUEsRUFBQTtBQUM5QixNQUFBLEtBQUEsRUFBQSxNQUFBOztBQUFBLE1BQUcsRUFBRSxNQUFNLE1BQUEsQ0FBWCxJQUFXLENBQVIsQ0FBSCxFQUFBO0FBQ0UsSUFBQSxNQUFBLEdBQVMsb0JBQUEsSUFBQSxDQUFUOztBQUNBLFFBQUcsRUFBRSxNQUFNLE1BQUEsQ0FBWCxNQUFXLENBQVIsQ0FBSCxFQUFBO0FBQ0UsWUFBTSxNQUFBLENBQUEsSUFBQSxFQURSLE1BQ1EsQ0FBTjs7O0FBQ0YsUUFBQTtBQUNFLGFBQUEsTUFBTSxLQUFBLENBQUEsSUFBQSxFQURSLElBQ1EsQ0FBTjtBQURGLEtBQUEsQ0FBQSxPQUFBLE1BQUEsRUFBQTtBQUVNLE1BQUEsS0FBQSxHQUFBLE1BQUE7O0FBQ0osVUFBRyxLQUFLLENBQUwsSUFBQSxLQUFILFFBQUEsRUFBQTtBQUNFLGNBREYsS0FDRTtBQUpKO0FBSkY7O0FBRGdCLENBQU0sQ0FBTixDQUFsQjs7QUFXQSxnQkFBQSxLQUFBLEdBQVEsVUFBQSxPQUFBLEVBQUE7QUFDTixNQUF5QixPQUFBLElBQXpCLElBQUEsRUFBQTtBQUFBLElBQUEsT0FBTyxDQUFQLEtBQUEsQ0FBQSxPQUFBOzs7U0FDQSxPQUFPLENBQVAsSUFBQSxDQUFhLENBQWIsQ0FBQSxDO0FBRk0sQ0FBUjs7QUFJQSxjQUFBLEdBQUEsR0FBTSxVQUFBLE9BQUEsRUFBQTtTQUNKLDZCQUFRLFVBQUEsT0FBQSxFQUFBLE1BQUEsRUFBQTtXQUNOLHlCQUFBLE9BQUEsRUFBYyxVQUFBLEtBQUEsRUFBQSxNQUFBLEVBQUEsTUFBQSxFQUFBO0FBQ1osVUFBQSxLQUFBLEVBQUE7ZUFDRSxNQUFBLENBREYsS0FDRSxDO0FBREYsT0FBQSxNQUFBO2VBR0UsT0FBQSxDQUFRO0FBQUEsVUFBQSxNQUFBO0FBSFYsVUFBQTtBQUdVLFNBQVIsQzs7QUFKSixLQUFBLEM7QUFERixHQUFBLEM7QUFESSxDQUFOOztBQVFBLGdCQUFBLEtBQUEsR0FBUSxVQUFDO0FBQUEsRUFBQSxNQUFBO0FBQUQsRUFBQTtBQUFDLENBQUQsRUFBQTtBQUNOLE1BQStCLE1BQU0sQ0FBTixNQUFBLEdBQS9CLENBQUEsRUFBQTtBQUFBLElBQUEsT0FBTyxDQUFDLE1BQVIsQ0FBQSxLQUFBLENBQUEsTUFBQTs7O0FBQ0EsTUFBK0IsTUFBTSxDQUFOLE1BQUEsR0FBL0IsQ0FBQSxFQUFBO1dBQUEsT0FBTyxDQUFDLE1BQVIsQ0FBQSxLQUFBLENBQUEsTUFBQSxDOztBQUZNLENBQVIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge3Byb21pc2lmeX0gZnJvbSBcInV0aWxcIlxuaW1wb3J0IHtleGVjfSBmcm9tIFwiY2hpbGRfcHJvY2Vzc1wiXG5pbXBvcnQge2pvaW4sIGRpcm5hbWV9IGZyb20gXCJwYXRoXCJcbmltcG9ydCBzdHJlYW0gZnJvbSBcInN0cmVhbVwiXG5pbXBvcnQge2N1cnJ5LCBiaW5hcnl9IGZyb20gXCJwYW5kYS1nYXJkZW5cIlxuaW1wb3J0IHtpc1R5cGUsIGlzS2luZCwgaXNGdW5jdGlvbiwgaXNTdHJpbmcsIGlzUHJvbWlzZSwgaXNCdWZmZXIsXG4gIHByb21pc2UsIGVxfSBmcm9tIFwicGFuZGEtcGFyY2htZW50XCJcbmltcG9ydCBNZXRob2QgZnJvbSBcInBhbmRhLWdlbmVyaWNzXCJcbmltcG9ydCBmcyBmcm9tIFwiZnNcIlxuaW1wb3J0IG1pbmltYXRjaCBmcm9tIFwibWluaW1hdGNoXCJcblxue2NyZWF0ZSwgZGVmaW5lfSA9IE1ldGhvZFxuXG5GUyA9IGRvIChyZXN1bHQgPSB7fSkgLT5cbiAgZm9yIGtleSwgdmFsdWUgb2YgZnNcbiAgICByZXN1bHRba2V5XSA9IGlmIGlzRnVuY3Rpb24gdmFsdWUgdGhlbiAocHJvbWlzaWZ5IHZhbHVlKSBlbHNlIHZhbHVlXG4gIHJlc3VsdFxuXG5cbiMgd2UncmUgZ29pbmcgdG8gZXhwb3J0IHRoaXNcbntzdGF0fSA9IEZTXG5cbmV4aXN0cyA9IGV4aXN0ID0gIChwYXRoKSAtPlxuICB0cnlcbiAgICAoYXdhaXQgRlMuc3RhdCBwYXRoKT9cbiAgY2F0Y2hcbiAgICBmYWxzZVxuXG5pc0RpcmVjdG9yeSA9ICAocGF0aCkgLT5cbiAgdHJ5XG4gICAgKGF3YWl0IEZTLnN0YXQgcGF0aCkuaXNEaXJlY3RvcnkoKVxuICBjYXRjaFxuICAgIGZhbHNlXG5cbmlzRmlsZSA9ICAocGF0aCkgLT5cbiAgdHJ5XG4gICAgKGF3YWl0IEZTLnN0YXQgcGF0aCkuaXNGaWxlKClcbiAgY2F0Y2hcbiAgICBmYWxzZVxuXG5pc1JlYWRhYmxlID0gKHgpIC0+IHg/LnJlYWQ/LmNhbGw/XG5cbiMgc29ja2V0LWJhc2VkIHN0cmVhbXMgYXJlIGR1cGxleCBzdHJlYW1zXG4jIGFuZCBkbyBub3QgaW5oZXJpdCBmcm9tIHN0cmVhbS53cml0YWJsZVxuaXNXcml0YWJsZSA9ICh4KSAtPiB4Py53cml0ZT8uY2FsbD9cblxucmVhZCA9IGNyZWF0ZVxuICBuYW1lOiBcInJlYWRcIlxuICBkZXNjcmlwdGlvbjogXCJyZWFkcyBkYXRhIGZyb20gZmlsZSwgc3RyaW5nLCBvciBzdHJlYW1cIlxuXG5kZWZpbmUgcmVhZCwgaXNTdHJpbmcsIGlzU3RyaW5nLFxuICAocGF0aCwgZW5jb2RpbmcpIC0+XG4gICAgRlMucmVhZEZpbGUgcGF0aCwgZW5jb2RpbmdcblxuZGVmaW5lIHJlYWQsIGlzU3RyaW5nLCAocGF0aCkgLT4gcmVhZCBwYXRoLCAndXRmOCdcblxucmVhZEJ1ZmZlciA9IChwYXRoKSAtPiBGUy5yZWFkRmlsZSBwYXRoXG5kZWZpbmUgcmVhZCwgaXNTdHJpbmcsIChlcSB1bmRlZmluZWQpLCByZWFkQnVmZmVyXG5kZWZpbmUgcmVhZCwgaXNTdHJpbmcsIChlcSBcImJpbmFyeVwiKSwgcmVhZEJ1ZmZlclxuZGVmaW5lIHJlYWQsIGlzU3RyaW5nLCAoZXEgXCJidWZmZXJcIiksIHJlYWRCdWZmZXJcblxuIyBTdHJpbmdpZmllcyBhIHN0cmVhbSdzIGJ1ZmZlciBhY2NvcmRpbmcgdG8gdGhlIGdpdmVuIGVuY29kaW5nLlxucmVhZFN0cmVhbSA9IChzdHJlYW0sIGVuY29kaW5nID0gXCJ1dGY4XCIpIC0+XG4gIGJ1ZmZlciA9IFwiXCJcbiAgcHJvbWlzZSAocmVzb2x2ZSwgcmVqZWN0KSAtPlxuICAgIHN0cmVhbS5vbiBcImRhdGFcIiwgKGRhdGEpIC0+IGJ1ZmZlciArPSBkYXRhLnRvU3RyaW5nKGVuY29kaW5nKVxuICAgIHN0cmVhbS5vbiBcImVuZFwiLCAtPiByZXNvbHZlIGJ1ZmZlclxuICAgIHN0cmVhbS5vbiBcImVycm9yXCIsIChlcnJvcikgLT4gcmVqZWN0IGVycm9yXG5cbiMgRXh0cmFjdHMgYSBzdHJlYW0ncyByYXcgYnVmZmVyLlxucmVhZEJpbmFyeVN0cmVhbSA9IChzdHJlYW0pIC0+XG4gIGJ1ZmZlciA9IG5ldyBCdWZmZXIoMClcbiAgcHJvbWlzZSAocmVzb2x2ZSwgcmVqZWN0KSAtPlxuICAgIHN0cmVhbS5vbiBcImRhdGFcIiwgKGRhdGEpIC0+IGJ1ZmZlciA9IEJ1ZmZlci5jb25jYXQgW2J1ZmZlciwgZGF0YV1cbiAgICBzdHJlYW0ub24gXCJlbmRcIiwgLT4gcmVzb2x2ZSBidWZmZXJcbiAgICBzdHJlYW0ub24gXCJlcnJvclwiLCAoZXJyb3IpIC0+IHJlamVjdCBlcnJvclxuXG5kZWZpbmUgcmVhZCwgaXNSZWFkYWJsZSwgcmVhZFN0cmVhbVxuZGVmaW5lIHJlYWQsIGlzUmVhZGFibGUsIGlzU3RyaW5nLCByZWFkU3RyZWFtXG5kZWZpbmUgcmVhZCwgaXNSZWFkYWJsZSwgKGVxIHVuZGVmaW5lZCksIHJlYWRCaW5hcnlTdHJlYW1cbmRlZmluZSByZWFkLCBpc1JlYWRhYmxlLCAoZXEgXCJiaW5hcnlcIiksIHJlYWRCaW5hcnlTdHJlYW1cbmRlZmluZSByZWFkLCBpc1JlYWRhYmxlLCAoZXEgXCJidWZmZXJcIiksIHJlYWRCaW5hcnlTdHJlYW1cblxud3JpdGUgPSBjcmVhdGVcbiAgbmFtZTogXCJ3cml0ZVwiXG4gIGRlc2NyaXB0aW9uOiBcIndyaXRlcyBkYXRhIHRvIGZpbGUgb3Igc3RyZWFtXCJcblxuZGVmaW5lIHdyaXRlLCBpc1N0cmluZywgaXNCdWZmZXIsXG4gIChwYXRoLCBidWZmZXIpIC0+IEZTLndyaXRlRmlsZSBwYXRoLCBidWZmZXJcblxuZGVmaW5lIHdyaXRlLCBpc1N0cmluZywgaXNTdHJpbmcsXG4gIChwYXRoLCBjb250ZW50KSAtPiBGUy53cml0ZUZpbGUgcGF0aCwgY29udGVudFxuXG5kZWZpbmUgd3JpdGUsIGlzU3RyaW5nLCBpc1JlYWRhYmxlLFxuICAocGF0aCwgc3RyZWFtKSAtPiBzdHJlYW0ucGlwZSBmcy5jcmVhdGVXcml0ZVN0cmVhbSBwYXRoXG5cbmRlZmluZSB3cml0ZSwgaXNXcml0YWJsZSwgaXNTdHJpbmcsXG4gIChzdHJlYW0sIGNvbnRlbnQpIC0+XG4gICAgcHJvbWlzZSAocmVzb2x2ZSwgcmVqZWN0KSAtPlxuICAgICAgc3RyZWFtLndyaXRlIGNvbnRlbnQsIFwidXRmLThcIiwgKGVycm9yKSAtPlxuICAgICAgICBpZiAhZXJyb3I/XG4gICAgICAgICAgcmVzb2x2ZSgpXG4gICAgICAgIGVsc2VcbiAgICAgICAgICByZWplY3QgZXJyb3Jcblxud3JpdGUgPSBjdXJyeSBiaW5hcnkgd3JpdGVcblxucmVhZGRpciA9IHJlYWREaXIgPSAocGF0aCkgLT4gRlMucmVhZGRpciBwYXRoXG5cbmxzID0gIChwYXRoKSAtPlxuICAoam9pbiBwYXRoLCBmaWxlKSBmb3IgZmlsZSBpbiAoYXdhaXQgcmVhZGRpciBwYXRoKVxuXG5sc1IgPSBsc3IgPSAgKHBhdGgsIHZpc2l0ZWQgPSBbXSkgLT5cbiAgY2hpbGRyZW4gPSBhd2FpdCBscyBwYXRoXG4gIGZvciBjaGlsZCBpbiBjaGlsZHJlbiB3aGVuICEoY2hpbGQgaW4gdmlzaXRlZClcbiAgICBpZiBhd2FpdCBpc0RpcmVjdG9yeSBjaGlsZFxuICAgICAgYXdhaXQgbHNSIGNoaWxkLCB2aXNpdGVkXG4gICAgZWxzZVxuICAgICAgdmlzaXRlZC5wdXNoIGNoaWxkXG4gIHZpc2l0ZWRcblxucm1SID0gcm1yID0gKHBhdGgpIC0+XG4gIGlmIChhd2FpdCBpc0RpcmVjdG9yeSBwYXRoKVxuICAgIHBhdGhzID0gYXdhaXQgbHMgcGF0aFxuICAgIChhd2FpdCBybXIgX3BhdGgpIGZvciBfcGF0aCBpbiBwYXRoc1xuICAgIGF3YWl0IHJtRGlyIHBhdGhcbiAgZWxzZSBpZiAoYXdhaXQgaXNGaWxlIHBhdGgpXG4gICAgYXdhaXQgcm0gcGF0aFxuXG5nbG9iID0gIChwYXR0ZXJuLCBwYXRoKSAtPlxuICBtaW5pbWF0Y2gubWF0Y2ggKGF3YWl0IGxzUiBwYXRoKSwgKGpvaW4gcGF0aCwgcGF0dGVybilcblxuY2hEaXIgPSBjaGRpciA9IGNyZWF0ZVxuICBuYW1lOiBcImNoZGlyXCJcbiAgZGVzY3JpcHRpb246IFwiQ2hhbmdlcyB0aGUgd29ya2luZyBkaXJlY3RvcnkgYW5kIG1ha2VzIGl0IGVhc3kgdG8gcmV0dXJuLlwiXG5cbmRlZmluZSBjaGRpciwgaXNTdHJpbmcsIChwYXRoKSAtPlxuICBjd2QgPSBwcm9jZXNzLmN3ZCgpXG4gIHByb2Nlc3MuY2hkaXIgcGF0aFxuICAtPiBwcm9jZXNzLmNoZGlyIGN3ZFxuXG5kZWZpbmUgY2hkaXIsIGlzU3RyaW5nLCBpc0Z1bmN0aW9uLCAocGF0aCwgZikgLT5cbiAgcmVzdG9yZSA9IGNoZGlyIHBhdGhcbiAgZigpXG4gIHJlc3RvcmUoKVxuXG5ybSA9IChwYXRoKSAtPiBGUy51bmxpbmsgcGF0aFxuXG5tdiA9IGN1cnJ5IGJpbmFyeSAob2xkLCBfbmV3KSAtPiBGUy5yZW5hbWUgb2xkLCBfbmV3XG5cbmNwID0gY3VycnkgYmluYXJ5IChvbGQsIF9uZXcpIC0+XG4gIHByb21pc2UgKHJlc29sdmUsIHJlamVjdCkgLT5cbiAgICAoZnMuY3JlYXRlUmVhZFN0cmVhbSBvbGQpXG4gICAgLnBpcGUoZnMuY3JlYXRlV3JpdGVTdHJlYW0gX25ldylcbiAgICAub24gXCJlcnJvclwiLCAoZXJyb3IpIC0+IHJlamVjdCBlcnJvclxuICAgIC5vbiBcImNsb3NlXCIsIC0+IHJlc29sdmUoKVxuXG5ybURpciA9IHJtZGlyID0gKHBhdGgpIC0+IEZTLnJtZGlyIHBhdGhcblxubWtEaXIgPSBta2RpciA9IGN1cnJ5IGJpbmFyeSAobW9kZSwgcGF0aCkgLT4gRlMubWtkaXIgcGF0aCwgbW9kZVxuXG5ta0RpclAgPSBta2RpcnAgPSBjdXJyeSBiaW5hcnkgIChtb2RlLCBwYXRoKSAtPlxuICBpZiAhKGF3YWl0IGV4aXN0cyBwYXRoKVxuICAgIHBhcmVudCA9IGRpcm5hbWUgcGF0aFxuICAgIGlmICEoYXdhaXQgZXhpc3RzIHBhcmVudClcbiAgICAgIGF3YWl0IG1rZGlycCBtb2RlLCBwYXJlbnRcbiAgICB0cnlcbiAgICAgIGF3YWl0IG1rZGlyIG1vZGUsIHBhdGhcbiAgICBjYXRjaCBlcnJvclxuICAgICAgaWYgZXJyb3IuY29kZSAhPSBcIkVFWElTVFwiXG4gICAgICAgIHRocm93IGVycm9yXG5cbmFib3J0ID0gKG1lc3NhZ2UpIC0+XG4gIGNvbnNvbGUuZXJyb3IgbWVzc2FnZSBpZiBtZXNzYWdlP1xuICBwcm9jZXNzLmV4aXQgLTFcblxucnVuID0gKGNvbW1hbmQpIC0+XG4gIHByb21pc2UgKHJlc29sdmUsIHJlamVjdCkgLT5cbiAgICBleGVjIGNvbW1hbmQsIChlcnJvciwgc3Rkb3V0LCBzdGRlcnIpIC0+XG4gICAgICBpZiBlcnJvclxuICAgICAgICByZWplY3QgZXJyb3JcbiAgICAgIGVsc2VcbiAgICAgICAgcmVzb2x2ZSB7c3Rkb3V0LCBzdGRlcnJ9XG5cbnByaW50ID0gKHtzdGRvdXQsIHN0ZGVycn0pIC0+XG4gIHByb2Nlc3Muc3Rkb3V0LndyaXRlIHN0ZG91dCBpZiBzdGRvdXQubGVuZ3RoID4gMFxuICBwcm9jZXNzLnN0ZGVyci53cml0ZSBzdGRlcnIgaWYgc3RkZXJyLmxlbmd0aCA+IDBcblxuZXhwb3J0IHtyZWFkLCB3cml0ZSwgc3RhdCwgZXhpc3QsIGV4aXN0cyxcbiAgaXNSZWFkYWJsZSwgaXNXcml0YWJsZSwgaXNGaWxlLCBpc0RpcmVjdG9yeSxcbiAgcmVhZGRpciwgcmVhZERpciwgbHMsIGxzUiwgbHNyLCBnbG9iLFxuICBta2RpciwgbWtEaXIsIG1rZGlycCwgbWtEaXJQLCBjaGRpciwgY2hEaXIsXG4gIGNwLCBtdiwgcm0sIHJtZGlyLCBybURpciwgcm1SLCBybXIsXG4gIHJ1biwgcHJpbnQsIGFib3J0fVxuIl0sInNvdXJjZVJvb3QiOiIifQ==
//# sourceURL=/Users/david/repos/panda-quill/src/index.coffee