"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.fromJSON = exports.toJSON = exports.equal = exports.clone = exports.merge = exports.extend = exports.include = exports.assign = exports.query = exports.omit = exports.pick = exports.pairs = exports.values = exports.keys = exports.has = exports.methods = exports.properties = exports.detach = exports.bind = exports.property = void 0;

var _pandaGarden = require("panda-garden");

var _pandaGenerics = _interopRequireDefault(require("panda-generics"));

var _type = require("./type");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var assign, bind, cat, clone, create, define, detach, equal, extend, fromJSON, has, include, keys, merge, methods, omit, pairs, pick, properties, property, query, toJSON, unique, values;
exports.values = values;
exports.toJSON = toJSON;
exports.query = query;
exports.property = property;
exports.properties = properties;
exports.pick = pick;
exports.pairs = pairs;
exports.omit = omit;
exports.methods = methods;
exports.merge = merge;
exports.keys = keys;
exports.include = include;
exports.has = has;
exports.fromJSON = fromJSON;
exports.extend = extend;
exports.equal = equal;
exports.detach = detach;
exports.clone = clone;
exports.bind = bind;
exports.assign = assign;
({
  create,
  define
} = _pandaGenerics.default);
exports.property = property = (0, _pandaGarden.curry)(function (key, object) {
  return object[key];
});
exports.bind = bind = (0, _pandaGarden.curry)(function (f, x) {
  return f.bind(x);
});

exports.detach = detach = function (f) {
  return (0, _pandaGarden.curry)(function (x, ...args) {
    return f.apply(x, args);
  });
};

exports.properties = properties = function (target, descriptions) {
  var description, name, results;
  results = [];

  for (name in descriptions) {
    description = descriptions[name];

    if (description.enumerable == null) {
      description.enumerable = true;
    }

    if (description.configurable == null) {
      description.configurable = true;
    }

    results.push(Object.defineProperty(target, name, description));
  }

  return results;
};

exports.methods = methods = function (target, definitions) {
  var f, name, results;
  results = [];

  for (name in definitions) {
    f = definitions[name];
    results.push(Object.defineProperty(target, name, {
      value: f,
      configurable: true,
      writable: true
    }));
  }

  return results;
};

exports.has = has = (0, _pandaGarden.curry)(function (p, x) {
  return x[p] != null;
});
exports.keys = keys = Object.keys;

exports.values = values = function (x) {
  var k, results, v;
  results = [];

  for (k in x) {
    v = x[k];
    results.push(v);
  }

  return results;
};

exports.pairs = pairs = function (x) {
  var k, results, v;
  results = [];

  for (k in x) {
    v = x[k];
    results.push([k, v]);
  }

  return results;
};

exports.pick = pick = (0, _pandaGarden.curry)(function (f, x) {
  var k, r, v;
  r = {};

  for (k in x) {
    v = x[k];

    if (f(k, v)) {
      r[k] = v;
    }
  }

  return r;
});
exports.omit = omit = (0, _pandaGarden.curry)(function (f, x) {
  return pick((0, _pandaGarden.negate)(f), x);
});
exports.query = query = (0, _pandaGarden.curry)(function (example, target) {
  var k, v;

  if ((0, _type.isObject)(example) && (0, _type.isObject)(target)) {
    for (k in example) {
      v = example[k];

      if (!query(v, target[k])) {
        return false;
      }
    }

    return true;
  } else {
    return equal(example, target);
  }
});

exports.include = include = exports.extend = extend = exports.assign = assign = function (target, ...sources) {
  return Object.assign(target, ...sources);
};

exports.merge = merge = function (...objects) {
  return Object.assign({}, ...objects);
}; // Trivial case: return the same value


exports.clone = clone = create({
  name: "clone",
  description: "Creates a deep clone of an entity.",
  default: _pandaGarden.identity
}); // TODO: handle additional cases
// See Lodash implemention as a guide

define(clone, _type.isObject, function (original) {
  var copy, key;
  copy = new original.constructor(); // TODO: this doesn't clone non-enumerable properties

  for (key in original) {
    copy[key] = clone(original[key]);
  }

  return copy;
}); // adapted from lodash as an example

define(clone, _type.isRegExp, function (flags) {
  return function (original) {
    var copy;
    copy = new original.constructor(original.source, flags.exec(original));
    copy.lastIndex = original.lastIndex;
    return copy;
  };
}(/\w*$/)); // “deep” comparison, when applicable

exports.equal = equal = create({
  name: "equal",
  description: "Performs a deep comparison of two entities.",
  default: function (a, b) {
    return a === b;
  }
}); // can't use unique and cat from array b/c array
// depends on object (this file) for detach

cat = detach(Array.prototype.concat);

unique = function (ax) {
  return Array.from(new Set(ax));
};

define(equal, _type.isObject, _type.isObject, function (a, b) {
  return a === b || function () {
    var j, key, len, ref;
    ref = unique(cat(keys(a), keys(b)));

    for (j = 0, len = ref.length; j < len; j++) {
      key = ref[j];

      if (!equal(a[key], b[key])) {
        return false;
      }
    }

    return true;
  }();
});
define(equal, _type.isArray, _type.isArray, function (ax, bx) {
  return ax === bx || function () {
    var i, j, ref;

    if (ax.length !== bx.length) {
      return false;
    }

    for (i = j = 0, ref = ax.length; 0 <= ref ? j <= ref : j >= ref; i = 0 <= ref ? ++j : --j) {
      if (!equal(ax[i], bx[i])) {
        return false;
      }
    }

    return true;
  }();
});

exports.toJSON = toJSON = function (x, pretty = false) {
  if (pretty) {
    return JSON.stringify(x, null, 2);
  } else {
    return JSON.stringify(x);
  }
};

exports.fromJSON = fromJSON = JSON.parse;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9kYXZpZC9yZXBvcy9wYW5kYS1wYXJjaG1lbnQvc3JjL29iamVjdC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOztBQUNBOzs7O0FBRkEsSUFBQSxNQUFBLEVBQUEsSUFBQSxFQUFBLEdBQUEsRUFBQSxLQUFBLEVBQUEsTUFBQSxFQUFBLE1BQUEsRUFBQSxNQUFBLEVBQUEsS0FBQSxFQUFBLE1BQUEsRUFBQSxRQUFBLEVBQUEsR0FBQSxFQUFBLE9BQUEsRUFBQSxJQUFBLEVBQUEsS0FBQSxFQUFBLE9BQUEsRUFBQSxJQUFBLEVBQUEsS0FBQSxFQUFBLElBQUEsRUFBQSxVQUFBLEVBQUEsUUFBQSxFQUFBLEtBQUEsRUFBQSxNQUFBLEVBQUEsTUFBQSxFQUFBLE1BQUE7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUlBLENBQUE7QUFBQSxFQUFBLE1BQUE7QUFBQSxFQUFBO0FBQUEsSUFBQSxzQkFBQTtBQUVBLG1CQUFBLFFBQUEsR0FBVyx3QkFBTSxVQUFBLEdBQUEsRUFBQSxNQUFBLEVBQUE7U0FBaUIsTUFBTyxDQUFBLEdBQUEsQztBQUE5QixDQUFBLENBQVg7QUFFQSxlQUFBLElBQUEsR0FBTyx3QkFBTSxVQUFBLENBQUEsRUFBQSxDQUFBLEVBQUE7U0FBVSxDQUFDLENBQUQsSUFBQSxDQUFBLENBQUEsQztBQUFoQixDQUFBLENBQVA7O0FBRUEsaUJBQUEsTUFBQSxHQUFTLFVBQUEsQ0FBQSxFQUFBO1NBQU8sd0JBQU0sVUFBQSxDQUFBLEVBQUEsR0FBQSxJQUFBLEVBQUE7V0FBZ0IsQ0FBQyxDQUFELEtBQUEsQ0FBQSxDQUFBLEVBQUEsSUFBQSxDO0FBQXRCLEdBQUEsQztBQUFQLENBQVQ7O0FBRUEscUJBQUEsVUFBQSxHQUFhLFVBQUEsTUFBQSxFQUFBLFlBQUEsRUFBQTtBQUNYLE1BQUEsV0FBQSxFQUFBLElBQUEsRUFBQSxPQUFBO0FBQUEsRUFBQSxPQUFBLEdBQUEsRUFBQTs7QUFBQSxPQUFBLElBQUEsSUFBQSxZQUFBLEVBQUE7Ozs7QUFDRSxNQUFBLFdBQVcsQ0FBQyxVQUFaLEdBQTBCLElBQTFCOzs7O0FBQ0EsTUFBQSxXQUFXLENBQUMsWUFBWixHQUE0QixJQUE1Qjs7O2lCQUNBLE1BQU0sQ0FBTixjQUFBLENBQUEsTUFBQSxFQUFBLElBQUEsRUFBQSxXQUFBLEM7QUFIRjs7O0FBRFcsQ0FBYjs7QUFNQSxrQkFBQSxPQUFBLEdBQVUsVUFBQSxNQUFBLEVBQUEsV0FBQSxFQUFBO0FBQ1IsTUFBQSxDQUFBLEVBQUEsSUFBQSxFQUFBLE9BQUE7QUFBQSxFQUFBLE9BQUEsR0FBQSxFQUFBOztBQUFBLE9BQUEsSUFBQSxJQUFBLFdBQUEsRUFBQTs7aUJBQ0UsTUFBTSxDQUFOLGNBQUEsQ0FBQSxNQUFBLEVBQUEsSUFBQSxFQUNFO0FBQUEsTUFBQSxLQUFBLEVBQUEsQ0FBQTtBQUNBLE1BQUEsWUFBQSxFQURBLElBQUE7QUFFQSxNQUFBLFFBQUEsRUFBVTtBQUZWLEtBREYsQztBQURGOzs7QUFEUSxDQUFWOztBQU9BLGNBQUEsR0FBQSxHQUFNLHdCQUFNLFVBQUEsQ0FBQSxFQUFBLENBQUEsRUFBQTtTQUFVLENBQUEsQ0FBQSxDQUFBLENBQUEsSUFBQSxJO0FBQWhCLENBQUEsQ0FBTjtBQUVBLGVBQUEsSUFBQSxHQUFPLE1BQU0sQ0FBQyxJQUFkOztBQUVBLGlCQUFBLE1BQUEsR0FBUyxVQUFBLENBQUEsRUFBQTtBQUFPLE1BQUEsQ0FBQSxFQUFBLE9BQUEsRUFBQSxDQUFBO0FBQUUsRUFBQSxPQUFBLEdBQUEsRUFBQTs7QUFBQSxPQUFBLENBQUEsSUFBQSxDQUFBLEVBQUE7O2lCQUFGLEM7QUFBRTs7O0FBQVQsQ0FBVDs7QUFFQSxnQkFBQSxLQUFBLEdBQVEsVUFBQSxDQUFBLEVBQUE7QUFBTyxNQUFBLENBQUEsRUFBQSxPQUFBLEVBQUEsQ0FBQTtBQUFPLEVBQUEsT0FBQSxHQUFBLEVBQUE7O0FBQUEsT0FBQSxDQUFBLElBQUEsQ0FBQSxFQUFBOztpQkFBUCxDQUFBLENBQUEsRUFBQSxDQUFBLEM7QUFBTzs7O0FBQWQsQ0FBUjs7QUFFQSxlQUFBLElBQUEsR0FBTyx3QkFBTSxVQUFBLENBQUEsRUFBQSxDQUFBLEVBQUE7QUFDWCxNQUFBLENBQUEsRUFBQSxDQUFBLEVBQUEsQ0FBQTtBQUFBLEVBQUEsQ0FBQSxHQUFJLEVBQUo7O0FBQ1MsT0FBQSxDQUFBLElBQUEsQ0FBQSxFQUFBOzs7UUFBbUIsQ0FBQSxDQUFBLENBQUEsRUFBQSxDQUFBLEMsRUFBQTtBQUE1QixNQUFBLENBQUUsQ0FBRixDQUFFLENBQUYsR0FBTyxDQUFQOztBQUFTOztTQUNULEM7QUFISyxDQUFBLENBQVA7QUFLQSxlQUFBLElBQUEsR0FBTyx3QkFBTSxVQUFBLENBQUEsRUFBQSxDQUFBLEVBQUE7U0FBVSxJQUFBLENBQU0seUJBQU4sQ0FBTSxDQUFOLEVBQUEsQ0FBQSxDO0FBQWhCLENBQUEsQ0FBUDtBQUVBLGdCQUFBLEtBQUEsR0FBUSx3QkFBTSxVQUFBLE9BQUEsRUFBQSxNQUFBLEVBQUE7QUFDWixNQUFBLENBQUEsRUFBQSxDQUFBOztBQUFBLE1BQUksb0JBQUQsT0FBQyxDQUFELElBQXVCLG9CQUExQixNQUEwQixDQUExQixFQUFBO0FBQ0UsU0FBQSxDQUFBLElBQUEsT0FBQSxFQUFBOzs7QUFDRSxVQUFBLENBQW9CLEtBQUEsQ0FBQSxDQUFBLEVBQVMsTUFBTyxDQUFwQyxDQUFvQyxDQUFoQixDQUFwQixFQUFBO0FBQUEsZUFBQSxLQUFBOztBQURGOztBQUVBLFdBSEYsSUFHRTtBQUhGLEdBQUEsTUFBQTtXQUtFLEtBQUEsQ0FBQSxPQUFBLEVBTEYsTUFLRSxDOztBQU5JLENBQUEsQ0FBUjs7QUFRQSxrQkFBQSxPQUFBLG9CQUFVLE1BQUEsb0JBQVMsTUFBQSxHQUFTLFVBQUEsTUFBQSxFQUFBLEdBQUEsT0FBQSxFQUFBO1NBQzFCLE1BQU0sQ0FBTixNQUFBLENBQUEsTUFBQSxFQUFzQixHQUF0QixPQUFBLEM7QUFEMEIsQ0FBNUI7O0FBR0EsZ0JBQUEsS0FBQSxHQUFRLFVBQUEsR0FBQSxPQUFBLEVBQUE7U0FBZ0IsTUFBTSxDQUFOLE1BQUEsQ0FBQSxFQUFBLEVBQWtCLEdBQWxCLE9BQUEsQztBQW5EeEIsQ0FtREEsQzs7O0FBR0EsZ0JBQUEsS0FBQSxHQUFRLE1BQUEsQ0FDTjtBQUFBLEVBQUEsSUFBQSxFQUFBLE9BQUE7QUFDQSxFQUFBLFdBQUEsRUFEQSxvQ0FBQTtBQUVBLEVBQUEsT0FBQSxFQUFTO0FBRlQsQ0FETSxDQUFSLEM7OztBQVFBLE1BQUEsQ0FBQSxLQUFBLEVBQUEsY0FBQSxFQUF3QixVQUFBLFFBQUEsRUFBQTtBQUN0QixNQUFBLElBQUEsRUFBQSxHQUFBO0FBQUEsRUFBQSxJQUFBLEdBQU8sSUFBSSxRQUFRLENBQW5CLFdBQU8sRUFBUCxDQURzQixDOztBQUd0QixPQUFBLEdBQUEsSUFBQSxRQUFBLEVBQUE7QUFDRSxJQUFBLElBQUssQ0FBTCxHQUFLLENBQUwsR0FBYSxLQUFBLENBQU0sUUFBUyxDQUFmLEdBQWUsQ0FBZixDQUFiO0FBREY7O0FBRUEsU0FBTyxJQUFQO0FBbkVGLENBOERBLENBQUEsQzs7QUFRQSxNQUFBLENBQUEsS0FBQSxFQUFBLGNBQUEsRUFBMkIsVUFBQSxLQUFBLEVBQUE7U0FDekIsVUFBQSxRQUFBLEVBQUE7QUFDRSxRQUFBLElBQUE7QUFBQSxJQUFBLElBQUEsR0FBTyxJQUFJLFFBQVEsQ0FBWixXQUFBLENBQXlCLFFBQVEsQ0FBakMsTUFBQSxFQUEyQyxLQUFLLENBQUwsSUFBQSxDQUEzQyxRQUEyQyxDQUEzQyxDQUFQO0FBQ0EsSUFBQSxJQUFJLENBQUosU0FBQSxHQUFpQixRQUFRLENBQUMsU0FBMUI7V0FDQSxJO0FBSEYsRztBQURzQixDQUFHLENBdEUzQixNQXNFMkIsQ0FBM0IsQ0FBQSxDOztBQU9BLGdCQUFBLEtBQUEsR0FBUSxNQUFBLENBQ047QUFBQSxFQUFBLElBQUEsRUFBQSxPQUFBO0FBQ0EsRUFBQSxXQUFBLEVBREEsNkNBQUE7QUFFQSxFQUFBLE9BQUEsRUFBUyxVQUFBLENBQUEsRUFBQSxDQUFBLEVBQUE7V0FBVSxDQUFBLEtBQUssQztBQUFmO0FBRlQsQ0FETSxDQUFSLEM7OztBQU9BLEdBQUEsR0FBTSxNQUFBLENBQU8sS0FBSyxDQUFBLFNBQUwsQ0FBUCxNQUFBLENBQU47O0FBQ0EsTUFBQSxHQUFTLFVBQUEsRUFBQSxFQUFBO1NBQVEsS0FBSyxDQUFMLElBQUEsQ0FBVyxJQUFBLEdBQUEsQ0FBWCxFQUFXLENBQVgsQztBQUFSLENBQVQ7O0FBQ0EsTUFBQSxDQUFBLEtBQUEsRUFBQSxjQUFBLEVBQUEsY0FBQSxFQUFrQyxVQUFBLENBQUEsRUFBQSxDQUFBLEVBQUE7U0FDL0IsQ0FBQSxLQUFELENBQUEsSUFBZSxZQUFBO0FBQ2IsUUFBQSxDQUFBLEVBQUEsR0FBQSxFQUFBLEdBQUEsRUFBQSxHQUFBO0FBQUEsSUFBQSxHQUFBLEdBQUEsTUFBQSxDQUFBLEdBQUEsQ0FBQSxJQUFBLENBQUEsQ0FBQSxDQUFBLEVBQUEsSUFBQSxDQUFBLENBQUEsQ0FBQSxDQUFBLENBQUE7O0FBQUEsU0FBQSxDQUFBLEdBQUEsQ0FBQSxFQUFBLEdBQUEsR0FBQSxHQUFBLENBQUEsTUFBQSxFQUFBLENBQUEsR0FBQSxHQUFBLEVBQUEsQ0FBQSxFQUFBLEVBQUE7OztBQUNFLFVBQUcsQ0FBRSxLQUFBLENBQU0sQ0FBRSxDQUFSLEdBQVEsQ0FBUixFQUFjLENBQUUsQ0FBckIsR0FBcUIsQ0FBaEIsQ0FBTCxFQUFBO0FBQ0UsZUFERixLQUNFOztBQUZKOztXQUdBLEk7QUFKVSxHQUFHLEU7QUFEakIsQ0FBQSxDQUFBO0FBT0EsTUFBQSxDQUFBLEtBQUEsRUFBQSxhQUFBLEVBQUEsYUFBQSxFQUFnQyxVQUFBLEVBQUEsRUFBQSxFQUFBLEVBQUE7U0FDN0IsRUFBQSxLQUFELEVBQUEsSUFBaUIsWUFBQTtBQUNmLFFBQUEsQ0FBQSxFQUFBLENBQUEsRUFBQSxHQUFBOztBQUFBLFFBQWdCLEVBQUUsQ0FBRixNQUFBLEtBQWEsRUFBRSxDQUEvQixNQUFBLEVBQUE7QUFBQSxhQUFBLEtBQUE7OztBQUNBLFNBQVMsQ0FBQSxHQUFBLENBQUEsR0FBQSxDQUFBLEVBQUEsR0FBQSxHQUFBLEVBQUEsQ0FBQSxNQUFULEVBQVMsS0FBQSxHQUFBLEdBQUEsQ0FBQSxJQUFBLEdBQUEsR0FBQSxDQUFBLElBQUEsR0FBVCxFQUFTLENBQUEsR0FBQSxLQUFBLEdBQUEsR0FBQSxFQUFBLENBQUEsR0FBQSxFQUFULENBQUEsRUFBQTtBQUNFLFVBQUcsQ0FBQyxLQUFBLENBQU0sRUFBRyxDQUFULENBQVMsQ0FBVCxFQUFhLEVBQUcsQ0FBcEIsQ0FBb0IsQ0FBaEIsQ0FBSixFQUFBO0FBQ0UsZUFERixLQUNFOztBQUZKOztXQUdBLEk7QUFMWSxHQUFHLEU7QUFEbkIsQ0FBQSxDQUFBOztBQVFBLGlCQUFBLE1BQUEsR0FBUyxVQUFBLENBQUEsRUFBSSxNQUFBLEdBQUosS0FBQSxFQUFBO0FBQ1AsTUFBQSxNQUFBLEVBQUE7V0FDRSxJQUFJLENBQUosU0FBQSxDQUFBLENBQUEsRUFBQSxJQUFBLEVBREYsQ0FDRSxDO0FBREYsR0FBQSxNQUFBO1dBR0UsSUFBSSxDQUFKLFNBQUEsQ0FIRixDQUdFLEM7O0FBSkssQ0FBVDs7QUFNQSxtQkFBQSxRQUFBLEdBQVcsSUFBSSxDQUFDLEtBQWhCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtpZGVudGl0eSwgY3VycnksIG5lZ2F0ZX0gZnJvbSBcInBhbmRhLWdhcmRlblwiXG5pbXBvcnQgTWV0aG9kIGZyb20gXCJwYW5kYS1nZW5lcmljc1wiXG5pbXBvcnQge2lzT2JqZWN0LCBpc0FycmF5LCBpc0Z1bmN0aW9uLCBpc1JlZ0V4cH0gZnJvbSBcIi4vdHlwZVwiXG5cbntjcmVhdGUsIGRlZmluZX0gPSBNZXRob2RcblxucHJvcGVydHkgPSBjdXJyeSAoa2V5LCBvYmplY3QpIC0+IG9iamVjdFtrZXldXG5cbmJpbmQgPSBjdXJyeSAoZiwgeCkgLT4gZi5iaW5kIHhcblxuZGV0YWNoID0gKGYpIC0+IGN1cnJ5ICh4LCBhcmdzLi4uKSAtPiBmLmFwcGx5IHgsIGFyZ3NcblxucHJvcGVydGllcyA9ICh0YXJnZXQsIGRlc2NyaXB0aW9ucykgLT5cbiAgZm9yIG5hbWUsIGRlc2NyaXB0aW9uIG9mIGRlc2NyaXB0aW9uc1xuICAgIGRlc2NyaXB0aW9uLmVudW1lcmFibGUgPz0gdHJ1ZVxuICAgIGRlc2NyaXB0aW9uLmNvbmZpZ3VyYWJsZSA/PSB0cnVlXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5IHRhcmdldCwgbmFtZSwgZGVzY3JpcHRpb25cblxubWV0aG9kcyA9ICh0YXJnZXQsIGRlZmluaXRpb25zKSAtPlxuICBmb3IgbmFtZSwgZiBvZiBkZWZpbml0aW9uc1xuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSB0YXJnZXQsIG5hbWUsXG4gICAgICB2YWx1ZTogZlxuICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICB3cml0YWJsZTogdHJ1ZVxuXG5oYXMgPSBjdXJyeSAocCwgeCkgLT4geFtwXT9cblxua2V5cyA9IE9iamVjdC5rZXlzXG5cbnZhbHVlcyA9ICh4KSAtPiB2IGZvciBrLCB2IG9mIHhcblxucGFpcnMgPSAoeCkgLT4gW2ssIHZdIGZvciBrLCB2IG9mIHhcblxucGljayA9IGN1cnJ5IChmLCB4KSAtPlxuICByID0ge31cbiAgcltrXSA9IHYgZm9yIGssIHYgb2YgeCB3aGVuIGYgaywgdlxuICByXG5cbm9taXQgPSBjdXJyeSAoZiwgeCkgLT4gcGljayAobmVnYXRlIGYpLCB4XG5cbnF1ZXJ5ID0gY3VycnkgKGV4YW1wbGUsIHRhcmdldCkgLT5cbiAgaWYgKGlzT2JqZWN0IGV4YW1wbGUpICYmIChpc09iamVjdCB0YXJnZXQpXG4gICAgZm9yIGssIHYgb2YgZXhhbXBsZVxuICAgICAgcmV0dXJuIGZhbHNlIHVubGVzcyBxdWVyeSB2LCB0YXJnZXRba11cbiAgICByZXR1cm4gdHJ1ZVxuICBlbHNlXG4gICAgZXF1YWwgZXhhbXBsZSwgdGFyZ2V0XG5cbmluY2x1ZGUgPSBleHRlbmQgPSBhc3NpZ24gPSAodGFyZ2V0LCBzb3VyY2VzLi4uKSAtPlxuICBPYmplY3QuYXNzaWduIHRhcmdldCwgc291cmNlcy4uLlxuXG5tZXJnZSA9IChvYmplY3RzLi4uKSAtPiBPYmplY3QuYXNzaWduIHt9LCBvYmplY3RzLi4uXG5cbiMgVHJpdmlhbCBjYXNlOiByZXR1cm4gdGhlIHNhbWUgdmFsdWVcbmNsb25lID0gY3JlYXRlXG4gIG5hbWU6IFwiY2xvbmVcIlxuICBkZXNjcmlwdGlvbjogXCJDcmVhdGVzIGEgZGVlcCBjbG9uZSBvZiBhbiBlbnRpdHkuXCJcbiAgZGVmYXVsdDogaWRlbnRpdHlcblxuIyBUT0RPOiBoYW5kbGUgYWRkaXRpb25hbCBjYXNlc1xuIyBTZWUgTG9kYXNoIGltcGxlbWVudGlvbiBhcyBhIGd1aWRlXG5cbmRlZmluZSBjbG9uZSwgaXNPYmplY3QsIChvcmlnaW5hbCkgLT5cbiAgY29weSA9IG5ldyBvcmlnaW5hbC5jb25zdHJ1Y3RvcigpXG4gICMgVE9ETzogdGhpcyBkb2Vzbid0IGNsb25lIG5vbi1lbnVtZXJhYmxlIHByb3BlcnRpZXNcbiAgZm9yIGtleSBvZiBvcmlnaW5hbFxuICAgIGNvcHlba2V5XSA9IChjbG9uZSBvcmlnaW5hbFtrZXldKVxuICByZXR1cm4gY29weVxuXG4jIGFkYXB0ZWQgZnJvbSBsb2Rhc2ggYXMgYW4gZXhhbXBsZVxuZGVmaW5lIGNsb25lLCBpc1JlZ0V4cCwgZG8gKGZsYWdzPS9cXHcqJC8pIC0+XG4gIChvcmlnaW5hbCkgLT5cbiAgICBjb3B5ID0gbmV3IG9yaWdpbmFsLmNvbnN0cnVjdG9yIG9yaWdpbmFsLnNvdXJjZSwgKGZsYWdzLmV4ZWMgb3JpZ2luYWwpXG4gICAgY29weS5sYXN0SW5kZXggPSBvcmlnaW5hbC5sYXN0SW5kZXhcbiAgICBjb3B5XG5cbiMg4oCcZGVlcOKAnSBjb21wYXJpc29uLCB3aGVuIGFwcGxpY2FibGVcbmVxdWFsID0gY3JlYXRlXG4gIG5hbWU6IFwiZXF1YWxcIlxuICBkZXNjcmlwdGlvbjogXCJQZXJmb3JtcyBhIGRlZXAgY29tcGFyaXNvbiBvZiB0d28gZW50aXRpZXMuXCJcbiAgZGVmYXVsdDogKGEsIGIpIC0+IGEgPT0gYlxuXG4jIGNhbid0IHVzZSB1bmlxdWUgYW5kIGNhdCBmcm9tIGFycmF5IGIvYyBhcnJheVxuIyBkZXBlbmRzIG9uIG9iamVjdCAodGhpcyBmaWxlKSBmb3IgZGV0YWNoXG5jYXQgPSBkZXRhY2ggQXJyYXk6OmNvbmNhdFxudW5pcXVlID0gKGF4KSAtPiBBcnJheS5mcm9tIG5ldyBTZXQgYXhcbmRlZmluZSBlcXVhbCwgaXNPYmplY3QsIGlzT2JqZWN0LCAoYSwgYikgLT5cbiAgKGEgPT0gYikgfHwgZG8gLT5cbiAgICBmb3Iga2V5IGluICh1bmlxdWUgY2F0IChrZXlzIGEpLCAoa2V5cyBiKSlcbiAgICAgIGlmICEgZXF1YWwgYVtrZXldLCBiW2tleV1cbiAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgdHJ1ZVxuXG5kZWZpbmUgZXF1YWwsIGlzQXJyYXksIGlzQXJyYXksIChheCwgYngpIC0+XG4gIChheCA9PSBieCkgfHwgZG8gLT5cbiAgICByZXR1cm4gZmFsc2UgaWYgYXgubGVuZ3RoICE9IGJ4Lmxlbmd0aFxuICAgIGZvciBpIGluIFswLi5heC5sZW5ndGhdXG4gICAgICBpZiAhZXF1YWwgYXhbaV0sIGJ4W2ldXG4gICAgICAgIHJldHVybiBmYWxzZVxuICAgIHRydWVcblxudG9KU09OID0gKHgsIHByZXR0eSA9IGZhbHNlKSAtPlxuICBpZiBwcmV0dHlcbiAgICBKU09OLnN0cmluZ2lmeSB4LCBudWxsLCAyXG4gIGVsc2VcbiAgICBKU09OLnN0cmluZ2lmeSB4XG5cbmZyb21KU09OID0gSlNPTi5wYXJzZVxuXG5leHBvcnQge3Byb3BlcnR5LCBiaW5kLCBkZXRhY2gsXG5wcm9wZXJ0aWVzLCBtZXRob2RzLFxuaGFzLCBrZXlzLCB2YWx1ZXMsIHBhaXJzLFxucGljaywgb21pdCwgcXVlcnksXG5hc3NpZ24sIGluY2x1ZGUsIGV4dGVuZCwgbWVyZ2UsXG5jbG9uZSwgZXF1YWwsXG50b0pTT04sIGZyb21KU09OfVxuIl0sInNvdXJjZVJvb3QiOiIifQ==
//# sourceURL=/Users/david/repos/panda-parchment/src/object.coffee