"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.tools = void 0;

var _pandaRiver = require("panda-river");

var _pandaParchment = require("panda-parchment");

var _pandaQuill = require("panda-quill");

var _helpers = require("./helpers");

var _plugins = require("./plugins");

var _shell = require("./shell");

var tools;
exports.tools = tools;

exports.tools = tools = function (p9k) {
  var compile, cwd, define, extension, glob, read, run, target, targets, tasks, write;
  ({
    define,
    run,
    glob,
    read,
    write,
    extension
  } = p9k);
  cwd = process.cwd(); // Compile helper, taking target configuration
  // (target in configuration refers to output path)

  compile = function ({
    source,
    target,
    settings
  }) {
    return function () {
      return (0, _pandaRiver.go)([glob(source, cwd), (0, _pandaRiver.wait)((0, _pandaRiver.map)(read)), (0, _pandaRiver.map)((0, _plugins.coffee)(settings)), (0, _pandaRiver.map)(extension(".js")), (0, _pandaRiver.wait)((0, _pandaRiver.map)(write(target)))]);
    };
  };

  targets = {
    active: [],
    preset: {
      npm: function () {
        var settings;
        define("npm:clean", function () {
          return (0, _pandaQuill.rmr)("build/npm");
        }); // override defaults to support AWS Lambda

        settings = {
          transpile: {
            presets: [[(0, _helpers.resolve)("@babel/preset-env"), {
              targets: {
                node: "12.8"
              }
            }]]
          }
        };
        define("npm:compile:source", compile({
          source: "src/**/*.coffee",
          target: "build/npm",
          settings: settings
        }));
        define("npm:compile:tests", compile({
          source: "test/**/*.coffee",
          target: "build/npm",
          settings: settings
        }));
        define("npm:build", "npm:clean npm:compile:source& npm:compile:tests&");
        define("npm:run:tests", function () {
          return (0, _shell.shell)("node build/npm/test/index.js");
        });
        define("npm:test", "npm:build npm:run:tests");
        return define("npm:publish", function () {
          return (0, _shell.shell)("npm publish");
        });
      },
      web: function () {
        var settings;
        define("web:clean", function () {
          return (0, _pandaQuill.rmr)("build/web");
        }); // get all the latest

        settings = {
          transpile: {
            presets: [[(0, _helpers.resolve)("@babel/preset-env"), {
              targets: "last 2 chrome versions",
              modules: false
            }]]
          }
        };
        define("web:compile:source", compile({
          source: "src/**/*.coffee",
          target: "build/web",
          settings: settings
        }));
        define("web:compile:tests", compile({
          source: "test/**/*.coffee",
          target: "build/web",
          settings: settings
        }));
        define("web:build", "web:clean web:compile:source& web:compile:tests&");
        define("web:run:tests", function () {
          // TODO: probably should run in headless browser
          return (0, _shell.shell)("node build/web/test/index.js");
        });
        define("web:test", "web:build web:run:tests");
        return define("web:publish", async function () {
          await (0, _pandaQuill.write)("build/web/package.json", (0, _helpers.replace)([[_helpers.module.name, _helpers.module.name + "-esm"], ["build/npm", "."]], (0, _pandaParchment.toJSON)(_helpers.module, true)));
          return await (0, _shell.shell)("npm publish", "build/web");
        });
      }
    }
  }; // Tag a release

  define("git:tag", async function () {
    var version;
    ({
      version
    } = _helpers.module);
    await (0, _shell.shell)(`git tag -am ${version} ${version}`);
    return await (0, _shell.shell)("git push --tags");
  });
  define("clean", function () {
    return (0, _pandaQuill.rmr)("build");
  }); // define dyamically because active targets isn't yet defined

  tasks = function (task) {
    return function () {
      var i, len, name, ref, results;
      ref = targets.active;
      results = [];

      for (i = 0, len = ref.length; i < len; i++) {
        name = ref[i];
        results.push(run(`${name}:${task}`));
      }

      return results;
    };
  };

  define("build", tasks("build"));
  define("test", tasks("test"));
  define("publish", tasks("publish")); // if name references a preset, run the preset with
  // the definition as an arg. otw, the arg is a fn
  // defining the tasks under target name

  target = function (name, definition) {
    var f;
    targets.active.push(name);

    if ((f = targets.preset[name]) != null) {
      return f(definition);
    } else {
      return definition();
    }
  };

  return {
    target
  };
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9kYXZpZC9yZXBvcy9wYW5kYS1idWlsZGVyL3NyYy9pbmRleC5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUxBLElBQUEsS0FBQTs7O0FBT0EsZ0JBQUEsS0FBQSxHQUFRLFVBQUEsR0FBQSxFQUFBO0FBRU4sTUFBQSxPQUFBLEVBQUEsR0FBQSxFQUFBLE1BQUEsRUFBQSxTQUFBLEVBQUEsSUFBQSxFQUFBLElBQUEsRUFBQSxHQUFBLEVBQUEsTUFBQSxFQUFBLE9BQUEsRUFBQSxLQUFBLEVBQUEsS0FBQTtBQUFBLEdBQUE7QUFBQSxJQUFBLE1BQUE7QUFBQSxJQUFBLEdBQUE7QUFBQSxJQUFBLElBQUE7QUFBQSxJQUFBLElBQUE7QUFBQSxJQUFBLEtBQUE7QUFBQSxJQUFBO0FBQUEsTUFBQSxHQUFBO0FBRUEsRUFBQSxHQUFBLEdBQU0sT0FBTyxDQUZiLEdBRU0sRUFBTixDQUpNLEM7OztBQVFOLEVBQUEsT0FBQSxHQUFVLFVBQUM7QUFBQSxJQUFBLE1BQUE7QUFBQSxJQUFBLE1BQUE7QUFBRCxJQUFBO0FBQUMsR0FBRCxFQUFBO1dBQ1IsWUFBQTthQUNFLG9CQUFHLENBQ0QsSUFBQSxDQUFBLE1BQUEsRUFEQyxHQUNELENBREMsRUFFRCxzQkFBSyxxQkFGSixJQUVJLENBQUwsQ0FGQyxFQUdELHFCQUFJLHFCQUhILFFBR0csQ0FBSixDQUhDLEVBSUQscUJBQUksU0FBQSxDQUpILEtBSUcsQ0FBSixDQUpDLEVBS0Qsc0JBQUsscUJBQUksS0FBQSxDQUxYLE1BS1csQ0FBSixDQUFMLENBTEMsQ0FBSCxDO0FBREYsSztBQURRLEdBQVY7O0FBVUEsRUFBQSxPQUFBLEdBRUU7QUFBQSxJQUFBLE1BQUEsRUFBQSxFQUFBO0FBRUEsSUFBQSxNQUFBLEVBRUU7QUFBQSxNQUFBLEdBQUEsRUFBSyxZQUFBO0FBRUgsWUFBQSxRQUFBO0FBQUEsUUFBQSxNQUFBLENB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QTthQUdFLFVBSEYsRTs7QUFGTyxHQUFUOztTQU9BO0FBQUEsSUFBQTtBQUFBLEc7QUFoSU0sQ0FBUiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7Z28sIG1hcCwgd2FpdH0gZnJvbSBcInBhbmRhLXJpdmVyXCJcbmltcG9ydCB7dG9KU09OfSBmcm9tIFwicGFuZGEtcGFyY2htZW50XCJcbmltcG9ydCB7d3JpdGUgYXMgX3dyaXRlLCBybXJ9IGZyb20gXCJwYW5kYS1xdWlsbFwiXG5pbXBvcnQge21vZHVsZSwgcmVzb2x2ZSwgcmVwbGFjZX0gZnJvbSBcIi4vaGVscGVyc1wiXG5pbXBvcnQge2NvZmZlZX0gZnJvbSBcIi4vcGx1Z2luc1wiXG5pbXBvcnQge3NoZWxsfSBmcm9tIFwiLi9zaGVsbFwiXG5cbnRvb2xzID0gKHA5aykgLT5cblxuICB7ZGVmaW5lLCBydW4sIGdsb2IsIHJlYWQsIHdyaXRlLCBleHRlbnNpb259ID0gcDlrXG5cbiAgY3dkID0gcHJvY2Vzcy5jd2QoKVxuXG4gICMgQ29tcGlsZSBoZWxwZXIsIHRha2luZyB0YXJnZXQgY29uZmlndXJhdGlvblxuICAjICh0YXJnZXQgaW4gY29uZmlndXJhdGlvbiByZWZlcnMgdG8gb3V0cHV0IHBhdGgpXG4gIGNvbXBpbGUgPSAoe3NvdXJjZSwgdGFyZ2V0LCBzZXR0aW5nc30pIC0+XG4gICAgLT5cbiAgICAgIGdvIFtcbiAgICAgICAgZ2xvYiBzb3VyY2UsIGN3ZFxuICAgICAgICB3YWl0IG1hcCByZWFkXG4gICAgICAgIG1hcCBjb2ZmZWUgc2V0dGluZ3NcbiAgICAgICAgbWFwIGV4dGVuc2lvbiBcIi5qc1wiXG4gICAgICAgIHdhaXQgbWFwIHdyaXRlIHRhcmdldFxuICAgICAgXVxuXG4gIHRhcmdldHMgPVxuXG4gICAgYWN0aXZlOiBbXVxuXG4gICAgcHJlc2V0OlxuXG4gICAgICBucG06IC0+XG5cbiAgICAgICAgZGVmaW5lIFwibnBtOmNsZWFuXCIsIC0+IHJtciBcImJ1aWxkL25wbVwiXG5cbiAgICAgICAgIyBvdmVycmlkZSBkZWZhdWx0cyB0byBzdXBwb3J0IEFXUyBMYW1iZGFcbiAgICAgICAgc2V0dGluZ3MgPVxuICAgICAgICAgIHRyYW5zcGlsZTpcbiAgICAgICAgICAgIHByZXNldHM6IFtbXG4gICAgICAgICAgICAgIHJlc29sdmUgXCJAYmFiZWwvcHJlc2V0LWVudlwiXG4gICAgICAgICAgICAgIHRhcmdldHM6IG5vZGU6IFwiMTIuOFwiXG4gICAgICAgICAgICBdXVxuXG4gICAgICAgIGRlZmluZSBcIm5wbTpjb21waWxlOnNvdXJjZVwiLFxuICAgICAgICAgIGNvbXBpbGVcbiAgICAgICAgICAgIHNvdXJjZTogXCJzcmMvKiovKi5jb2ZmZWVcIlxuICAgICAgICAgICAgdGFyZ2V0OiBcImJ1aWxkL25wbVwiXG4gICAgICAgICAgICBzZXR0aW5nczogc2V0dGluZ3NcblxuICAgICAgICBkZWZpbmUgXCJucG06Y29tcGlsZTp0ZXN0c1wiLFxuICAgICAgICAgIGNvbXBpbGVcbiAgICAgICAgICAgIHNvdXJjZTogXCJ0ZXN0LyoqLyouY29mZmVlXCJcbiAgICAgICAgICAgIHRhcmdldDogXCJidWlsZC9ucG1cIlxuICAgICAgICAgICAgc2V0dGluZ3M6IHNldHRpbmdzXG5cbiAgICAgICAgZGVmaW5lIFwibnBtOmJ1aWxkXCIsIFwibnBtOmNsZWFuIG5wbTpjb21waWxlOnNvdXJjZSYgbnBtOmNvbXBpbGU6dGVzdHMmXCJcblxuICAgICAgICBkZWZpbmUgXCJucG06cnVuOnRlc3RzXCIsIC0+XG4gICAgICAgICAgc2hlbGwgXCJub2RlIGJ1aWxkL25wbS90ZXN0L2luZGV4LmpzXCJcblxuICAgICAgICBkZWZpbmUgXCJucG06dGVzdFwiLCBcIm5wbTpidWlsZCBucG06cnVuOnRlc3RzXCJcblxuICAgICAgICBkZWZpbmUgXCJucG06cHVibGlzaFwiLCAtPiBzaGVsbCBcIm5wbSBwdWJsaXNoXCJcblxuICAgICAgd2ViOiAtPlxuXG4gICAgICAgIGRlZmluZSBcIndlYjpjbGVhblwiLCAtPiBybXIgXCJidWlsZC93ZWJcIlxuXG4gICAgICAgICMgZ2V0IGFsbCB0aGUgbGF0ZXN0XG4gICAgICAgIHNldHRpbmdzID1cbiAgICAgICAgICB0cmFuc3BpbGU6XG4gICAgICAgICAgICBwcmVzZXRzOiBbW1xuICAgICAgICAgICAgICByZXNvbHZlIFwiQGJhYmVsL3ByZXNldC1lbnZcIlxuICAgICAgICAgICAgICB0YXJnZXRzOiBcImxhc3QgMiBjaHJvbWUgdmVyc2lvbnNcIlxuICAgICAgICAgICAgICBtb2R1bGVzOiBmYWxzZVxuICAgICAgICAgICAgXV1cblxuICAgICAgICBkZWZpbmUgXCJ3ZWI6Y29tcGlsZTpzb3VyY2VcIixcbiAgICAgICAgICBjb21waWxlXG4gICAgICAgICAgICBzb3VyY2U6IFwic3JjLyoqLyouY29mZmVlXCJcbiAgICAgICAgICAgIHRhcmdldDogXCJidWlsZC93ZWJcIlxuICAgICAgICAgICAgc2V0dGluZ3M6IHNldHRpbmdzXG5cbiAgICAgICAgZGVmaW5lIFwid2ViOmNvbXBpbGU6dGVzdHNcIixcbiAgICAgICAgICBjb21waWxlXG4gICAgICAgICAgICBzb3VyY2U6IFwidGVzdC8qKi8qLmNvZmZlZVwiXG4gICAgICAgICAgICB0YXJnZXQ6IFwiYnVpbGQvd2ViXCJcbiAgICAgICAgICAgIHNldHRpbmdzOiBzZXR0aW5nc1xuXG4gICAgICAgIGRlZmluZSBcIndlYjpidWlsZFwiLCBcIndlYjpjbGVhbiB3ZWI6Y29tcGlsZTpzb3VyY2UmIHdlYjpjb21waWxlOnRlc3RzJlwiXG5cbiAgICAgICAgZGVmaW5lIFwid2ViOnJ1bjp0ZXN0c1wiLCAtPlxuICAgICAgICAgICMgVE9ETzogcHJvYmFibHkgc2hvdWxkIHJ1biBpbiBoZWFkbGVzcyBicm93c2VyXG4gICAgICAgICAgc2hlbGwgXCJub2RlIGJ1aWxkL3dlYi90ZXN0L2luZGV4LmpzXCJcblxuICAgICAgICBkZWZpbmUgXCJ3ZWI6dGVzdFwiLCBcIndlYjpidWlsZCB3ZWI6cnVuOnRlc3RzXCJcblxuICAgICAgICBkZWZpbmUgXCJ3ZWI6cHVibGlzaFwiLCAtPlxuICAgICAgICAgIGF3YWl0IF93cml0ZSBcImJ1aWxkL3dlYi9wYWNrYWdlLmpzb25cIixcbiAgICAgICAgICAgIChyZXBsYWNlIFtcbiAgICAgICAgICAgICAgWyBtb2R1bGUubmFtZSwgbW9kdWxlLm5hbWUgKyBcIi1lc21cIiBdXG4gICAgICAgICAgICAgIFsgXCJidWlsZC9ucG1cIiwgXCIuXCIgXVxuICAgICAgICAgICAgXSwgKHRvSlNPTiBtb2R1bGUsIHRydWUpKVxuICAgICAgICAgIGF3YWl0IHNoZWxsIFwibnBtIHB1Ymxpc2hcIiwgXCJidWlsZC93ZWJcIlxuXG5cbiAgIyBUYWcgYSByZWxlYXNlXG4gIGRlZmluZSBcImdpdDp0YWdcIiwgLT5cbiAgICB7dmVyc2lvbn0gPSBtb2R1bGVcbiAgICBhd2FpdCBzaGVsbCBcImdpdCB0YWcgLWFtICN7dmVyc2lvbn0gI3t2ZXJzaW9ufVwiXG4gICAgYXdhaXQgc2hlbGwgXCJnaXQgcHVzaCAtLXRhZ3NcIlxuXG4gIGRlZmluZSBcImNsZWFuXCIsIC0+IHJtciBcImJ1aWxkXCJcblxuICAjIGRlZmluZSBkeWFtaWNhbGx5IGJlY2F1c2UgYWN0aXZlIHRhcmdldHMgaXNuJ3QgeWV0IGRlZmluZWRcblxuICB0YXNrcyA9ICh0YXNrKSAtPlxuICAgIC0+IHJ1biBcIiN7bmFtZX06I3t0YXNrfVwiIGZvciBuYW1lIGluIHRhcmdldHMuYWN0aXZlXG5cbiAgZGVmaW5lIFwiYnVpbGRcIiwgdGFza3MgXCJidWlsZFwiXG5cbiAgZGVmaW5lIFwidGVzdFwiLCB0YXNrcyBcInRlc3RcIlxuXG4gIGRlZmluZSBcInB1Ymxpc2hcIiwgdGFza3MgXCJwdWJsaXNoXCJcblxuICAjIGlmIG5hbWUgcmVmZXJlbmNlcyBhIHByZXNldCwgcnVuIHRoZSBwcmVzZXQgd2l0aFxuICAjIHRoZSBkZWZpbml0aW9uIGFzIGFuIGFyZy4gb3R3LCB0aGUgYXJnIGlzIGEgZm5cbiAgIyBkZWZpbmluZyB0aGUgdGFza3MgdW5kZXIgdGFyZ2V0IG5hbWVcbiAgdGFyZ2V0ID0gKG5hbWUsIGRlZmluaXRpb24pIC0+XG4gICAgdGFyZ2V0cy5hY3RpdmUucHVzaCBuYW1lXG4gICAgaWYgKGYgPSB0YXJnZXRzLnByZXNldFtuYW1lXSk/XG4gICAgICBmIGRlZmluaXRpb25cbiAgICBlbHNlXG4gICAgICBkZWZpbml0aW9uKClcblxuICB7dGFyZ2V0fVxuXG5leHBvcnQge3Rvb2xzfVxuIl0sInNvdXJjZVJvb3QiOiIifQ==
//# sourceURL=/Users/david/repos/panda-builder/src/index.coffee