var accumulate,
    compact,
    debounce,
    define,
    filter,
    isAny,
    limit,
    lines,
    map,
    partition,
    pour,
    project,
    reject,
    select,
    take,
    tee,
    throttle,
    splice = [].splice;
import { isFunction, isDefined, isNumber, property } from "panda-parchment";
import { curry, binary, ternary, negate, tee as _tee } from "panda-garden";
import Method from "panda-generics";
import { isIterator } from "./iterator";
import { isReactor } from "./reactor";
import { producer } from "./adapters";

isAny = function (x) {
  return true;
};

define = function ({
  name,
  description,
  terms,
  iterator,
  reactor
}) {
  var f;
  f = Method.create({
    name: name,
    description: description,
    default: function (...args) {
      var last, ref;
      ref = args, [...args] = ref, [last] = splice.call(args, -1);

      if (args.length === terms.length) {
        return f(...args, producer(last));
      } else {
        throw `${name}: wrong number of arguments`;
      }
    }
  });
  Method.define(f, ...terms, isIterator, iterator);
  Method.define(f, ...terms, isReactor, reactor);
  return f;
}; // map


map = curry(binary(define({
  name: "map",
  description: "Apply a transformation function to an iterator's products.",
  terms: [isFunction],
  iterator: function* (f, i) {
    var results, x;
    results = [];

    for (x of i) {
      results.push((yield f(x)));
    }

    return results;
  },
  reactor: async function* (f, r) {
    var results, x;
    results = [];

    for await (x of r) {
      results.push((yield f(x)));
    }

    return results;
  }
}))); // project

project = curry(function (p, i) {
  return map(property(p), i);
}); // accumulate

accumulate = curry(ternary(define({
  name: "accumulate",
  description: "Apply a transformation function to an iterator's products, producing an accumulated result.",
  terms: [isFunction, isAny],
  iterator: function* (f, k, i) {
    var results, x;
    results = [];

    for (x of i) {
      results.push((yield k = f(k, x)));
    }

    return results;
  },
  reactor: async function* (f, k, r) {
    var results, x;
    results = [];

    for await (x of r) {
      results.push((yield k = f(k, x)));
    }

    return results;
  }
}))); // select

select = filter = curry(binary(define({
  name: "select",
  description: "Apply a filtering function to products of an iterator.",
  terms: [isFunction],
  iterator: function* (f, i) {
    var results, x;
    results = [];

    for (x of i) {
      if (f(x)) {
        results.push((yield x));
      }
    }

    return results;
  },
  reactor: async function* (f, r) {
    var results, x;
    results = [];

    for await (x of r) {
      if (f(x)) {
        results.push((yield x));
      }
    }

    return results;
  }
}))); // reject

reject = curry(function (f, i) {
  return select(negate(f), i);
}); // compact

compact = select(isDefined); // tee

tee = curry(binary(define({
  name: "tee",
  description: "Apply a function to an iterator's products, returning them.",
  terms: [isFunction],
  iterator: function* (f, i) {
    var results, x;
    results = [];

    for (x of i) {
      results.push((yield _tee(f)(x)));
    }

    return results;
  },
  reactor: async function* (f, r) {
    var results, x;
    results = [];

    for await (x of r) {
      results.push((yield _tee(f)(x)));
    }

    return results;
  }
}))); // partition

partition = curry(binary(define({
  name: "partition",
  description: "Batches an interator's products in groups of N.",
  terms: [isNumber],
  iterator: function* (n, i) {
    var batch, x;
    batch = [];

    for (x of i) {
      batch.push(x);

      if (batch.length === n) {
        yield batch;
        batch = [];
      }
    }

    if (batch.length > 0) {
      return yield batch;
    }
  },
  reactor: async function* (n, r) {
    var batch, x;
    batch = [];

    for await (x of r) {
      batch.push(x);

      if (batch.length === n) {
        yield batch;
        batch = [];
      }
    }

    if (batch.length > 0) {
      return yield batch;
    }
  }
}))); // take

take = curry(binary(define({
  name: "take",
  description: "Apply a function to each product until it returns false.",
  terms: [isFunction],
  iterator: function* (f, i) {
    var results, x;
    results = [];

    for (x of i) {
      if (f(x)) {
        results.push((yield x));
      } else {
        break;
      }
    }

    return results;
  },
  reactor: async function* (f, r) {
    var results, x;
    results = [];

    for await (x of r) {
      if (f(x)) {
        results.push((yield x));
      } else {
        break;
      }
    }

    return results;
  }
}))); // limit

limit = function () {
  var f;

  f = function (n, i = 0) {
    return function () {
      return i++ < n;
    };
  };

  return function (n, i) {
    return take(f(n), i);
  };
}(); // pour
// TODO: generalize beyond strings
// possibly with a 2nd “combine” function?


pour = curry(binary(define({
  name: "pour",
  description: "Transforms the unit of iteration, ex: from blocks to lines.",
  terms: [isFunction],
  iterator: function* (f, i) {
    var first, j, last, len, line, lines, ref, remainder, x;
    remainder = "";

    for (x of i) {
      ref = f(x), [first, ...lines] = ref, [last] = splice.call(lines, -1);
      yield remainder + first;
      remainder = last;

      for (j = 0, len = lines.length; j < len; j++) {
        line = lines[j];
        yield line;
      }
    }

    if (remainder !== "") {
      return yield remainder;
    }
  },
  reactor: async function* (f, r) {
    var first, j, last, len, line, lines, ref, remainder, x;
    remainder = "";

    for await (x of r) {
      ref = f(x), [first, ...lines] = ref, [last] = splice.call(lines, -1);
      yield remainder + first;
      remainder = last;

      for (j = 0, len = lines.length; j < len; j++) {
        line = lines[j];
        yield line;
      }
    }

    if (remainder !== "") {
      return yield remainder;
    }
  }
}))); // lines

lines = pour(function (s) {
  return s.toString().split("\n");
}); // throttle

throttle = debounce = curry(async function* (interval, r) {
  var last, results, x;
  last = 0;
  results = [];

  for await (x of r) {
    if (Date.now() - last >= interval) {
      results.push((yield x));
    } else {
      results.push(void 0);
    }
  }

  return results;
});
export { map, project, accumulate, select, filter, reject, compact, tee, partition, take, limit, lines, throttle };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9kYXZpZC9yZXBvcy9wYW5kYS1yaXZlci9zcmMvZmlsdGVycy5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsSUFBQSxVQUFBO0FBQUEsSUFBQSxPQUFBO0FBQUEsSUFBQSxRQUFBO0FBQUEsSUFBQSxNQUFBO0FBQUEsSUFBQSxNQUFBO0FBQUEsSUFBQSxLQUFBO0FBQUEsSUFBQSxLQUFBO0FBQUEsSUFBQSxLQUFBO0FBQUEsSUFBQSxHQUFBO0FBQUEsSUFBQSxTQUFBO0FBQUEsSUFBQSxJQUFBO0FBQUEsSUFBQSxPQUFBO0FBQUEsSUFBQSxNQUFBO0FBQUEsSUFBQSxNQUFBO0FBQUEsSUFBQSxJQUFBO0FBQUEsSUFBQSxHQUFBO0FBQUEsSUFBQSxRQUFBO0FBQUEsSUFBQSxNQUFBLEdBQUEsR0FBQSxNQUFBO0FBQUEsU0FBQSxVQUFBLEVBQUEsU0FBQSxFQUFBLFFBQUEsRUFBQSxRQUFBLFFBQUEsaUJBQUE7QUFDQSxTQUFBLEtBQUEsRUFBQSxNQUFBLEVBQUEsT0FBQSxFQUFBLE1BQUEsRUFBd0MsR0FBQSxJQUF4QyxJQUFBLFFBQUEsY0FBQTtBQUNBLE9BQUEsTUFBQSxNQUFBLGdCQUFBO0FBQ0EsU0FBQSxVQUFBLFFBQUEsWUFBQTtBQUNBLFNBQUEsU0FBQSxRQUFBLFdBQUE7QUFDQSxTQUFBLFFBQUEsUUFBQSxZQUFBOztBQUVBLEtBQUEsR0FBUSxVQUFBLENBQUEsRUFBQTtTQUFPLEk7QUFBUCxDQUFSOztBQUVBLE1BQUEsR0FBUyxVQUFDO0FBQUEsRUFBQSxJQUFBO0FBQUEsRUFBQSxXQUFBO0FBQUEsRUFBQSxLQUFBO0FBQUEsRUFBQSxRQUFBO0FBQUQsRUFBQTtBQUFDLENBQUQsRUFBQTtBQUNQLE1BQUEsQ0FBQTtBQUFBLEVBQUEsQ0FBQSxHQUFJLE1BQU0sQ0FBTixNQUFBLENBQ0Y7QUFBQSxJQUFBLElBQUEsRUFBQSxJQUFBO0FBQ0EsSUFBQSxXQUFBLEVBREEsV0FBQTtBQUVBLElBQUEsT0FBQSxFQUFTLFVB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QUEsVUFBQSxFQUFBLE1BQUEsRUFBQSxNQUFBLEVBQUEsTUFBQSxFQUFBLE9BQUEsRUFBQSxHQUFBLEVBQUEsU0FBQSxFQUFBLElBQUEsRUFBQSxLQUFBLEVBQUEsS0FBQSxFQUFBLFFBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge2lzRnVuY3Rpb24sIGlzRGVmaW5lZCwgaXNOdW1iZXIsIHByb3BlcnR5fSBmcm9tIFwicGFuZGEtcGFyY2htZW50XCJcbmltcG9ydCB7Y3VycnksIGJpbmFyeSwgdGVybmFyeSwgbmVnYXRlLCB0ZWUgYXMgX3RlZX0gZnJvbSBcInBhbmRhLWdhcmRlblwiXG5pbXBvcnQgTWV0aG9kIGZyb20gXCJwYW5kYS1nZW5lcmljc1wiXG5pbXBvcnQge2lzSXRlcmF0b3J9IGZyb20gXCIuL2l0ZXJhdG9yXCJcbmltcG9ydCB7aXNSZWFjdG9yfSBmcm9tIFwiLi9yZWFjdG9yXCJcbmltcG9ydCB7cHJvZHVjZXJ9IGZyb20gXCIuL2FkYXB0ZXJzXCJcblxuaXNBbnkgPSAoeCkgLT4gdHJ1ZVxuXG5kZWZpbmUgPSAoe25hbWUsIGRlc2NyaXB0aW9uLCB0ZXJtcywgaXRlcmF0b3IsIHJlYWN0b3J9KSAtPlxuICBmID0gTWV0aG9kLmNyZWF0ZVxuICAgIG5hbWU6IG5hbWVcbiAgICBkZXNjcmlwdGlvbjogZGVzY3JpcHRpb25cbiAgICBkZWZhdWx0OiAoYXJncy4uLiwgbGFzdCkgLT5cbiAgICAgIGlmIGFyZ3MubGVuZ3RoID09IHRlcm1zLmxlbmd0aFxuICAgICAgICBmIGFyZ3MuLi4sIHByb2R1Y2VyIGxhc3RcbiAgICAgIGVsc2VcbiAgICAgICAgdGhyb3cgXCIje25hbWV9OiB3cm9uZyBudW1iZXIgb2YgYXJndW1lbnRzXCJcblxuICBNZXRob2QuZGVmaW5lIGYsIHRlcm1zLi4uLCBpc0l0ZXJhdG9yLCBpdGVyYXRvclxuICBNZXRob2QuZGVmaW5lIGYsIHRlcm1zLi4uLCBpc1JlYWN0b3IsIHJlYWN0b3JcbiAgZlxuXG4jIG1hcFxuXG5tYXAgPSBjdXJyeSBiaW5hcnkgZGVmaW5lXG4gIG5hbWU6IFwibWFwXCJcbiAgZGVzY3JpcHRpb246IFwiQXBwbHkgYSB0cmFuc2Zvcm1hdGlvbiBmdW5jdGlvbiB0byBhbiBpdGVyYXRvcidzIHByb2R1Y3RzLlwiXG4gIHRlcm1zOiBbIGlzRnVuY3Rpb24gXVxuICBpdGVyYXRvcjogKGYsIGkpIC0+IHlpZWxkIChmIHgpIGZvciB4IGZyb20gaVxuICByZWFjdG9yOiAoZiwgcikgLT4geWllbGQgKGYgeCkgZm9yIGF3YWl0IHggZnJvbSByXG5cbiMgcHJvamVjdFxuXG5wcm9qZWN0ID0gY3VycnkgKHAsIGkpIC0+IG1hcCAocHJvcGVydHkgcCksIGlcblxuIyBhY2N1bXVsYXRlXG5cbmFjY3VtdWxhdGUgPSBjdXJyeSB0ZXJuYXJ5IGRlZmluZVxuICBuYW1lOiBcImFjY3VtdWxhdGVcIlxuICBkZXNjcmlwdGlvbjogXCJBcHBseSBhIHRyYW5zZm9ybWF0aW9uIGZ1bmN0aW9uIHRvIGFuIGl0ZXJhdG9yJ3MgcHJvZHVjdHMsXG4gICAgcHJvZHVjaW5nIGFuIGFjY3VtdWxhdGVkIHJlc3VsdC5cIlxuICB0ZXJtczogWyBpc0Z1bmN0aW9uLCBpc0FueSBdXG4gIGl0ZXJhdG9yOiAoZiwgaywgaSkgLT4geWllbGQgKGsgPSBmIGssIHgpIGZvciB4IGZyb20gaVxuICByZWFjdG9yOiAoZiwgaywgcikgLT4geWllbGQgKGsgPSBmIGssIHgpIGZvciBhd2FpdCB4IGZyb20gclxuXG4jIHNlbGVjdFxuXG5zZWxlY3QgPSBmaWx0ZXIgPSBjdXJyeSBiaW5hcnkgZGVmaW5lXG4gIG5hbWU6IFwic2VsZWN0XCJcbiAgZGVzY3JpcHRpb246IFwiQXBwbHkgYSBmaWx0ZXJpbmcgZnVuY3Rpb24gdG8gcHJvZHVjdHMgb2YgYW4gaXRlcmF0b3IuXCJcbiAgdGVybXM6IFsgaXNGdW5jdGlvbiBdXG4gIGl0ZXJhdG9yOiAoZiwgaSkgLT4geWllbGQgeCBmb3IgeCBmcm9tIGkgd2hlbiBmIHhcbiAgcmVhY3RvcjogKGYsIHIpIC0+IHlpZWxkIHggZm9yIGF3YWl0IHggZnJvbSByIHdoZW4gZiB4XG5cbiMgcmVqZWN0XG5cbnJlamVjdCA9IGN1cnJ5IChmLCBpKSAtPiBzZWxlY3QgKG5lZ2F0ZSBmKSwgaVxuXG4jIGNvbXBhY3RcblxuY29tcGFjdCA9IHNlbGVjdCBpc0RlZmluZWRcblxuIyB0ZWVcblxudGVlID0gY3VycnkgYmluYXJ5IGRlZmluZVxuICBuYW1lOiBcInRlZVwiXG4gIGRlc2NyaXB0aW9uOiBcIkFwcGx5IGEgZnVuY3Rpb24gdG8gYW4gaXRlcmF0b3IncyBwcm9kdWN0cywgcmV0dXJuaW5nIHRoZW0uXCJcbiAgdGVybXM6IFsgaXNGdW5jdGlvbiBdXG4gIGl0ZXJhdG9yOiAoZiwgaSkgLT4geWllbGQgKChfdGVlIGYpIHgpIGZvciB4IGZyb20gaVxuICByZWFjdG9yOiAoZiwgcikgLT4geWllbGQgKChfdGVlIGYpIHgpIGZvciBhd2FpdCB4IGZyb20gclxuXG4jIHBhcnRpdGlvblxuXG5wYXJ0aXRpb24gPSBjdXJyeSBiaW5hcnkgZGVmaW5lXG4gIG5hbWU6IFwicGFydGl0aW9uXCJcbiAgZGVzY3JpcHRpb246IFwiQmF0Y2hlcyBhbiBpbnRlcmF0b3IncyBwcm9kdWN0cyBpbiBncm91cHMgb2YgTi5cIlxuICB0ZXJtczogWyBpc051bWJlciBdXG5cbiAgaXRlcmF0b3I6KG4sIGkpIC0+XG4gICAgYmF0Y2ggPSBbXVxuICAgIGZvciB4IGZyb20gaVxuICAgICAgYmF0Y2gucHVzaCB4XG4gICAgICBpZiBiYXRjaC5sZW5ndGggPT0gblxuICAgICAgICB5aWVsZCBiYXRjaFxuICAgICAgICBiYXRjaCA9IFtdXG4gICAgaWYgYmF0Y2gubGVuZ3RoID4gMFxuICAgICAgeWllbGQgYmF0Y2hcblxuICByZWFjdG9yOiAobiwgcikgLT5cbiAgICBiYXRjaCA9IFtdXG4gICAgZm9yIGF3YWl0IHggZnJvbSByXG4gICAgICBiYXRjaC5wdXNoIHhcbiAgICAgIGlmIGJhdGNoLmxlbmd0aCA9PSBuXG4gICAgICAgIHlpZWxkIGJhdGNoXG4gICAgICAgIGJhdGNoID0gW11cbiAgICBpZiBiYXRjaC5sZW5ndGggPiAwXG4gICAgICB5aWVsZCBiYXRjaFxuXG4jIHRha2VcblxudGFrZSA9IGN1cnJ5IGJpbmFyeSBkZWZpbmVcbiAgbmFtZTogXCJ0YWtlXCJcbiAgZGVzY3JpcHRpb246IFwiQXBwbHkgYSBmdW5jdGlvbiB0byBlYWNoIHByb2R1Y3QgdW50aWwgaXQgcmV0dXJucyBmYWxzZS5cIlxuICB0ZXJtczogWyBpc0Z1bmN0aW9uIF1cblxuICBpdGVyYXRvcjogKGYsIGkpIC0+XG4gICAgZm9yIHggZnJvbSBpXG4gICAgICBpZiBmIHhcbiAgICAgICAgeWllbGQgeFxuICAgICAgZWxzZVxuICAgICAgICBicmVha1xuXG4gIHJlYWN0b3I6IChmLCByKSAtPlxuICAgIGZvciBhd2FpdCB4IGZyb20gclxuICAgICAgaWYgZiB4XG4gICAgICAgIHlpZWxkIHhcbiAgICAgIGVsc2VcbiAgICAgICAgYnJlYWtcblxuIyBsaW1pdFxuXG5saW1pdCA9IGRvIC0+XG4gIGYgPSAobiwgaSA9IDApIC0+IC0+IGkrKyA8IG5cbiAgKG4sIGkpIC0+IHRha2UgKGYgbiksIGlcblxuIyBwb3VyXG5cbiMgVE9ETzogZ2VuZXJhbGl6ZSBiZXlvbmQgc3RyaW5nc1xuIyBwb3NzaWJseSB3aXRoIGEgMm5kIOKAnGNvbWJpbmXigJ0gZnVuY3Rpb24/XG5cbnBvdXIgPSBjdXJyeSBiaW5hcnkgZGVmaW5lXG4gIG5hbWU6IFwicG91clwiXG4gIGRlc2NyaXB0aW9uOiBcIlRyYW5zZm9ybXMgdGhlIHVuaXQgb2YgaXRlcmF0aW9uLCBleDogZnJvbSBibG9ja3MgdG8gbGluZXMuXCJcbiAgdGVybXM6IFsgaXNGdW5jdGlvbiBdXG4gIGl0ZXJhdG9yOiAoZiwgaSkgLT5cbiAgICByZW1haW5kZXIgPSBcIlwiXG4gICAgZm9yIHggZnJvbSBpXG4gICAgICBbZmlyc3QsIGxpbmVzLi4uLCBsYXN0XSA9IGYgeFxuICAgICAgeWllbGQgcmVtYWluZGVyICsgZmlyc3RcbiAgICAgIHJlbWFpbmRlciA9IGxhc3RcbiAgICAgIHlpZWxkIGxpbmUgZm9yIGxpbmUgaW4gbGluZXNcbiAgICBpZiByZW1haW5kZXIgIT0gXCJcIlxuICAgICAgeWllbGQgcmVtYWluZGVyXG4gIHJlYWN0b3I6IChmLCByKSAtPlxuICAgIHJlbWFpbmRlciA9IFwiXCJcbiAgICBmb3IgYXdhaXQgeCBmcm9tIHJcbiAgICAgIFtmaXJzdCwgbGluZXMuLi4sIGxhc3RdID0gZiB4XG4gICAgICB5aWVsZCByZW1haW5kZXIgKyBmaXJzdFxuICAgICAgcmVtYWluZGVyID0gbGFzdFxuICAgICAgeWllbGQgbGluZSBmb3IgbGluZSBpbiBsaW5lc1xuICAgIGlmIHJlbWFpbmRlciAhPSBcIlwiXG4gICAgICB5aWVsZCByZW1haW5kZXJcblxuIyBsaW5lc1xuXG5saW5lcyA9IHBvdXIgKHMpIC0+IHMudG9TdHJpbmcoKS5zcGxpdChcIlxcblwiKVxuXG4jIHRocm90dGxlXG5cbnRocm90dGxlID0gZGVib3VuY2UgPSBjdXJyeSAoaW50ZXJ2YWwsIHIpIC0+XG4gIGxhc3QgPSAwXG4gIGZvciBhd2FpdCB4IGZyb20gclxuICAgIGlmIChEYXRlLm5vdygpIC0gbGFzdCkgPj0gaW50ZXJ2YWxcbiAgICAgIHlpZWxkIHhcblxuZXhwb3J0IHttYXAsIHByb2plY3QsIGFjY3VtdWxhdGUsIHNlbGVjdCwgZmlsdGVyLCByZWplY3QsIGNvbXBhY3QsXG4gIHRlZSwgcGFydGl0aW9uLCB0YWtlLCBsaW1pdCwgbGluZXMsIHRocm90dGxlfVxuIl0sInNvdXJjZVJvb3QiOiIifQ==
//# sourceURL=/Users/david/repos/panda-river/src/filters.coffee