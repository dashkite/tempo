var asyncIterator, create, define, isAsyncGeneratorFunction, isAsyncIterable, isAsyncIterator, isReactor, isReagent, reactor;
import { identity, curry, binary, negate } from "panda-garden";
import Method from "panda-generics";
import { isFunction, isType } from "panda-parchment";
({
  create,
  define
} = Method);

if (Symbol.asyncIterator == null) {
  Symbol.asyncIterator = Symbol("asyncIterator");
}

isAsyncGeneratorFunction = function () {
  var f;

  f = async function* () {
    return yield await null;
  };

  return isType(f.constructor);
}();

isReagent = isAsyncIterable = function (x) {
  return isFunction(x != null ? x[Symbol.asyncIterator] : void 0) || isAsyncGeneratorFunction(x);
};

isReactor = isAsyncIterator = function (x) {
  return isFunction(x != null ? x.next : void 0) && isReagent(x);
};

reactor = asyncIterator = create({
  name: "reactor",
  description: "produces a reactor from an input",
  default: "unable to create reactor from value"
});
define(reactor, isFunction, function (f) {
  return {
    next: f,
    [Symbol.asyncIterator]: function () {
      return this;
    }
  };
});
define(reactor, isReagent, function (r) {
  return r[Symbol.asyncIterator]();
});
define(reactor, isAsyncGeneratorFunction, function (g) {
  return g();
});
define(reactor, isReactor, function (r) {
  return r;
});
export { isReagent, reactor, isReactor };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9kYXZpZC9yZXBvcy9wYW5kYS1yaXZlci9zcmMvcmVhY3Rvci5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsSUFBQSxhQUFBLEVBQUEsTUFBQSxFQUFBLE1BQUEsRUFBQSx3QkFBQSxFQUFBLGVBQUEsRUFBQSxlQUFBLEVBQUEsU0FBQSxFQUFBLFNBQUEsRUFBQSxPQUFBO0FBQUEsU0FBQSxRQUFBLEVBQUEsS0FBQSxFQUFBLE1BQUEsRUFBQSxNQUFBLFFBQUEsY0FBQTtBQUNBLE9BQUEsTUFBQSxNQUFBLGdCQUFBO0FBQ0EsU0FBQSxVQUFBLEVBQUEsTUFBQSxRQUFBLGlCQUFBO0FBRUEsQ0FBQTtBQUFBLEVBQUEsTUFBQTtBQUFBLEVBQUE7QUFBQSxJQUFBLE1BQUE7OztBQUVBLEVBQUEsTUFBTSxDQUFDLGFBQVAsR0FBd0IsTUFBQSxDQUFBLGVBQUEsQ0FBeEI7OztBQUVBLHdCQUFBLEdBQThCLFlBQUE7QUFDNUIsTUFBQSxDQUFBOztBQUFBLEVBQUEsQ0FBQSxHQUFJLG1CQUFBO0FBQUcsV0FBQSxNQUFNLE1BQU4sSUFBQTtBQUFILEdBQUo7O1NBQ0EsTUFBQSxDQUFPLENBQUMsQ0FBUixXQUFBLEM7QUFGeUIsQ0FBRyxFQUE5Qjs7QUFJQSxTQUFBLEdBQVksZUFBQSxHQUFrQixVQUFBLENBQUEsRUFBQTtTQUMzQixVQUFBLENBQUEsQ0FBQSxJQUFBLElBQUEsR0FBVyxDQUFHLENBQUEsTUFBTSxDQUFOLGFBQUEsQ0FBZCxHQUFjLEtBQWYsQ0FBQyxDQUFELElBQTBDLHdCQUFBLENBQUQsQ0FBQyxDO0FBRGQsQ0FBOUI7O0FBR0EsU0FBQSxHQUFZLGVBQUEsR0FBa0IsVUFBQSxDQUFBLEVBQUE7U0FBUSxVQUFBLENBQUEsQ0FBQSxJQUFBLElBQUEsR0FBVyxDQUFDLENBQUUsSUFBZCxHQUFjLEtBQWYsQ0FBQyxDQUFELElBQXlCLFNBQUEsQ0FBRCxDQUFDLEM7QUFBaEMsQ0FBOUI7O0FBRUEsT0FBQSxHQUFVLGFBQUEsR0FBZ0IsTUFBQSxDQUN4QjtBQUFBLEVBQUEsSUFBQSxFQUFBLFNBQUE7QUFDQSxFQUFBLFdBQUEsRUFEQSxrQ0FBQTtBQUVBLEVBQUEsT0FBQSxFQUFTO0FBRlQsQ0FEd0IsQ0FBMUI7QUFLQSxNQUFBLENBQUEsT0FBQSxFQUFBLFVBQUEsRUFBNEIsVUFBQSxDQUFBLEVBQUE7U0FDMUI7QUFBQSxJQUFBLElBQUEsRUFBQSxDQUFBO0FBQ0EsS0FBQyxNQUFNLENBQVAsYUFBQSxHQUF3QixZQUFBO2FBQUcsSTtBQUFIO0FBRHhCLEc7QUFERixDQUFBLENBQUE7QUFJQSxNQUFBLENBQUEsT0FBQSxFQUFBLFNBQUEsRUFBMkIsVUFBQSxDQUFBLEVBQUE7U0FBTyxDQUFFLENBQUEsTUFBTSxDQUFSLGFBQUUsQ0FBRixFO0FBQWxDLENBQUEsQ0FBQTtBQUVBLE1BQUEsQ0FBQSxPQUFBLEVBQUEsd0JBQUEsRUFBMEMsVUFBQSxDQUFBLEVBQUE7U0FBTyxDQUFBLEU7QUFBakQsQ0FBQSxDQUFBO0FBRUEsTUFBQSxDQUFBLE9BQUEsRUFBQSxTQUFBLEVBQTJCLFVBQUEsQ0FBQSxFQUFBO1NBQU8sQztBQUFsQyxDQUFBLENBQUE7QUFFQSxTQUFBLFNBQUEsRUFBQSxPQUFBLEVBQUEsU0FBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7aWRlbnRpdHksIGN1cnJ5LCBiaW5hcnksIG5lZ2F0ZX0gZnJvbSBcInBhbmRhLWdhcmRlblwiXG5pbXBvcnQgTWV0aG9kIGZyb20gXCJwYW5kYS1nZW5lcmljc1wiXG5pbXBvcnQge2lzRnVuY3Rpb24sIGlzVHlwZX0gZnJvbSBcInBhbmRhLXBhcmNobWVudFwiXG5cbntjcmVhdGUsIGRlZmluZX0gPSBNZXRob2RcblxuU3ltYm9sLmFzeW5jSXRlcmF0b3IgPz0gU3ltYm9sIFwiYXN5bmNJdGVyYXRvclwiXG5cbmlzQXN5bmNHZW5lcmF0b3JGdW5jdGlvbiA9IGRvIC0+XG4gIGYgPSAtPiB5aWVsZCBhd2FpdCBudWxsXG4gIGlzVHlwZSBmLmNvbnN0cnVjdG9yXG5cbmlzUmVhZ2VudCA9IGlzQXN5bmNJdGVyYWJsZSA9ICh4KSAtPlxuICAoaXNGdW5jdGlvbiB4P1tTeW1ib2wuYXN5bmNJdGVyYXRvcl0pIHx8IChpc0FzeW5jR2VuZXJhdG9yRnVuY3Rpb24geClcblxuaXNSZWFjdG9yID0gaXNBc3luY0l0ZXJhdG9yID0gKHgpIC0+IChpc0Z1bmN0aW9uIHg/Lm5leHQpICYmIChpc1JlYWdlbnQgeClcblxucmVhY3RvciA9IGFzeW5jSXRlcmF0b3IgPSBjcmVhdGVcbiAgbmFtZTogXCJyZWFjdG9yXCJcbiAgZGVzY3JpcHRpb246IFwicHJvZHVjZXMgYSByZWFjdG9yIGZyb20gYW4gaW5wdXRcIlxuICBkZWZhdWx0OiBcInVuYWJsZSB0byBjcmVhdGUgcmVhY3RvciBmcm9tIHZhbHVlXCJcblxuZGVmaW5lIHJlYWN0b3IsIGlzRnVuY3Rpb24sIChmKSAtPlxuICBuZXh0OiBmXG4gIFtTeW1ib2wuYXN5bmNJdGVyYXRvcl06IC0+IEBcblxuZGVmaW5lIHJlYWN0b3IsIGlzUmVhZ2VudCwgKHIpIC0+IHJbU3ltYm9sLmFzeW5jSXRlcmF0b3JdKClcblxuZGVmaW5lIHJlYWN0b3IsIGlzQXN5bmNHZW5lcmF0b3JGdW5jdGlvbiwgKGcpIC0+IGcoKVxuXG5kZWZpbmUgcmVhY3RvciwgaXNSZWFjdG9yLCAocikgLT4gclxuXG5leHBvcnQge2lzUmVhZ2VudCwgcmVhY3RvciwgaXNSZWFjdG9yfVxuIl0sInNvdXJjZVJvb3QiOiIifQ==
//# sourceURL=/Users/david/repos/panda-river/src/reactor.coffee