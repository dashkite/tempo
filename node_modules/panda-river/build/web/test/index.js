var i,
    len,
    modules,
    ref,
    target,
    targets,
    indexOf = [].indexOf;
import { print, test, success } from "amen";
import { default as iterators } from "./iterator";
import { default as reactors } from "./reactor";
import { default as adapters } from "./adapters";
import { default as filters } from "./filters";
import { default as reducers } from "./reducers";
import { // test to make sure top-level import works
iterator } from "../src/index"; // modules = { iterators, reactors, adapters, filters }

modules = {
  iterators,
  reactors,
  adapters,
  filters,
  reducers
};
targets = (ref = process.env.PANDA_RIVER_TARGETS) != null ? ref.split(/\s+/) : void 0;

if (targets == null) {
  targets = [];
}

for (i = 0, len = targets.length; i < len; i++) {
  target = targets[i];

  if (!(modules[target] == null)) {
    continue;
  }

  console.error(`invalid target: '${target}'`);
  process.exit(-1);
}

target = function (module) {
  return targets.length === 0 || indexOf.call(targets, module) >= 0;
};

(async function () {
  var module, name;
  print((await test("Panda River", function () {
    var results;
    results = [];

    for (name in modules) {
      module = modules[name];

      if (target(name)) {
        results.push(test(name, module));
      }
    }

    return results;
  }())));
  return process.exit(success ? 0 : 1);
})();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9kYXZpZC9yZXBvcy9wYW5kYS1yaXZlci90ZXN0L2luZGV4LmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxJQUFBLENBQUE7QUFBQSxJQUFBLEdBQUE7QUFBQSxJQUFBLE9BQUE7QUFBQSxJQUFBLEdBQUE7QUFBQSxJQUFBLE1BQUE7QUFBQSxJQUFBLE9BQUE7QUFBQSxJQUFBLE9BQUEsR0FBQSxHQUFBLE9BQUE7QUFBQSxTQUFBLEtBQUEsRUFBQSxJQUFBLEVBQUEsT0FBQSxRQUFBLE1BQUE7QUFDQSxTQUFRLE9BQUEsSUFBUixTQUFBLFFBQUEsWUFBQTtBQUNBLFNBQVEsT0FBQSxJQUFSLFFBQUEsUUFBQSxXQUFBO0FBQ0EsU0FBUSxPQUFBLElBQVIsUUFBQSxRQUFBLFlBQUE7QUFDQSxTQUFRLE9BQUEsSUFBUixPQUFBLFFBQUEsV0FBQTtBQUNBLFNBQVEsT0FBQSxJQUFSLFFBQUEsUUFBQSxZQUFBO0FBR0EsUztBQUFBLFFBQUEsUUFSQSxjQVFBLEM7O0FBR0EsT0FBQSxHQUFVO0FBQUEsRUFBQSxTQUFBO0FBQUEsRUFBQSxRQUFBO0FBQUEsRUFBQSxRQUFBO0FBQUEsRUFBQSxPQUFBO0FBQUEsRUFBQTtBQUFBLENBQVY7QUFDQSxPQUFBLEdBQUEsQ0FBQSxHQUFBLEdBQUEsT0FBQSxDQUFBLEdBQUEsQ0FBQSxtQkFBQSxLQUFBLElBQUEsR0FBQSxHQUF5QyxDQUEvQixLQUFWLENBQVUsS0FBVixDQUFBLEdBQVUsS0FBQSxDQUFWOzs7QUFDQSxFQUFBLE9BQUEsR0FBVyxFQUFYOzs7QUFFQSxLQUFBLENBQUEsR0FBQSxDQUFBLEVBQUEsR0FBQSxHQUFBLE9BQUEsQ0FBQSxNQUFBLEVBQUEsQ0FBQSxHQUFBLEdBQUEsRUFBQSxDQUFBLEVBQUEsRUFBQTs7O1FBQTRCLE9BQUEsQ0FBQSxNQUFBLENBQUEsSUFBQSxJLEdBQUE7Ozs7QUFDMUIsRUFBQSxPQUFPLENBQVAsS0FBQSxDQUFjLG9CQUFBLE1BQWQsR0FBQTtBQUNBLEVBQUEsT0FBTyxDQUFQLElBQUEsQ0FBYSxDQUFiLENBQUE7QUFGRjs7QUFJQSxNQUFBLEdBQVMsVUFBQSxNQUFBLEVBQUE7U0FBWSxPQUFPLENBQVAsTUFBQSxLQUFBLENBQUEsSUFBd0IsT0FBQSxDQUFBLElBQUEsQ0FBQSxPQUFBLEVBQUEsTUFBQSxLQUFELEM7QUFBbkMsQ0FBVDs7QUFFRyxDQUFBLGtCQUFBO0FBQ0QsTUFBQSxNQUFBLEVBQUEsSUFBQTtBQUFBLEVBQUEsS0FBQSxFQUFNLE1BQU0sSUFBQSxDQUFBLGFBQUEsRUFBQSxZQUFBOztBQUNVLElBQUEsT0FBQSxHQUFBLEVBQUE7O0FBQUEsU0FBQSxJQUFBLElBQUEsT0FBQSxFQUFBOzs7VUFBaUMsTUFBQSxDQUFBLElBQUEsQyxFQUFBO3FCQUFwRCxJQUFBLENBQUEsSUFBQSxFQUFBLE1BQUEsQzs7QUFBbUI7OztBQUR0QixHQUFZLEVBQUEsQ0FBWixFQUFBO1NBR0EsT0FBTyxDQUFQLElBQUEsQ0FBZ0IsT0FBSCxHQUFBLENBQUEsR0FBYixDQUFBLEM7QUFKRixDQUFHIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtwcmludCwgdGVzdCwgc3VjY2Vzc30gZnJvbSBcImFtZW5cIlxuaW1wb3J0IHtkZWZhdWx0IGFzIGl0ZXJhdG9yc30gZnJvbSBcIi4vaXRlcmF0b3JcIlxuaW1wb3J0IHtkZWZhdWx0IGFzIHJlYWN0b3JzfSBmcm9tIFwiLi9yZWFjdG9yXCJcbmltcG9ydCB7ZGVmYXVsdCBhcyBhZGFwdGVyc30gZnJvbSBcIi4vYWRhcHRlcnNcIlxuaW1wb3J0IHtkZWZhdWx0IGFzIGZpbHRlcnN9IGZyb20gXCIuL2ZpbHRlcnNcIlxuaW1wb3J0IHtkZWZhdWx0IGFzIHJlZHVjZXJzfSBmcm9tIFwiLi9yZWR1Y2Vyc1wiXG5cbiMgdGVzdCB0byBtYWtlIHN1cmUgdG9wLWxldmVsIGltcG9ydCB3b3Jrc1xuaW1wb3J0IHtpdGVyYXRvcn0gZnJvbSBcIi4uL3NyYy9pbmRleFwiXG5cbiMgbW9kdWxlcyA9IHsgaXRlcmF0b3JzLCByZWFjdG9ycywgYWRhcHRlcnMsIGZpbHRlcnMgfVxubW9kdWxlcyA9IHsgaXRlcmF0b3JzLCByZWFjdG9ycywgYWRhcHRlcnMsIGZpbHRlcnMsIHJlZHVjZXJzIH1cbnRhcmdldHMgPSBwcm9jZXNzLmVudi5QQU5EQV9SSVZFUl9UQVJHRVRTPy5zcGxpdCAvXFxzKy9cbnRhcmdldHMgPz0gW11cblxuZm9yIHRhcmdldCBpbiB0YXJnZXRzIHdoZW4gIW1vZHVsZXNbdGFyZ2V0XT9cbiAgY29uc29sZS5lcnJvciBcImludmFsaWQgdGFyZ2V0OiAnI3t0YXJnZXR9J1wiXG4gIHByb2Nlc3MuZXhpdCAtMVxuXG50YXJnZXQgPSAobW9kdWxlKSAtPiB0YXJnZXRzLmxlbmd0aCA9PSAwIHx8IChtb2R1bGUgaW4gdGFyZ2V0cylcblxuZG8gLT5cbiAgcHJpbnQgYXdhaXQgdGVzdCBcIlBhbmRhIFJpdmVyXCIsXG4gICAgKHRlc3QgbmFtZSwgbW9kdWxlKSBmb3IgbmFtZSwgbW9kdWxlIG9mIG1vZHVsZXMgd2hlbiB0YXJnZXQgbmFtZVxuXG4gIHByb2Nlc3MuZXhpdCBpZiBzdWNjZXNzIHRoZW4gMCBlbHNlIDFcbiJdLCJzb3VyY2VSb290IjoiIn0=
//# sourceURL=/Users/david/repos/panda-river/test/index.coffee