"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.throttle = exports.lines = exports.limit = exports.take = exports.partition = exports.tee = exports.compact = exports.reject = exports.filter = exports.select = exports.accumulate = exports.project = exports.map = void 0;

var _pandaParchment = require("panda-parchment");

var _pandaGarden = require("panda-garden");

var _pandaGenerics = _interopRequireDefault(require("panda-generics"));

var _iterator = require("./iterator");

var _reactor = require("./reactor");

var _adapters = require("./adapters");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var accumulate,
    compact,
    debounce,
    define,
    filter,
    isAny,
    limit,
    lines,
    map,
    partition,
    pour,
    project,
    reject,
    select,
    take,
    tee,
    throttle,
    splice = [].splice;
exports.throttle = throttle;
exports.tee = tee;
exports.take = take;
exports.select = select;
exports.reject = reject;
exports.project = project;
exports.partition = partition;
exports.map = map;
exports.lines = lines;
exports.limit = limit;
exports.filter = filter;
exports.compact = compact;
exports.accumulate = accumulate;

isAny = function (x) {
  return true;
};

define = function ({
  name,
  description,
  terms,
  iterator,
  reactor
}) {
  var f;
  f = _pandaGenerics.default.create({
    name: name,
    description: description,
    default: function (...args) {
      var last, ref;
      ref = args, [...args] = ref, [last] = splice.call(args, -1);

      if (args.length === terms.length) {
        return f(...args, (0, _adapters.producer)(last));
      } else {
        throw `${name}: wrong number of arguments`;
      }
    }
  });

  _pandaGenerics.default.define(f, ...terms, _iterator.isIterator, iterator);

  _pandaGenerics.default.define(f, ...terms, _reactor.isReactor, reactor);

  return f;
}; // map


exports.map = map = (0, _pandaGarden.curry)((0, _pandaGarden.binary)(define({
  name: "map",
  description: "Apply a transformation function to an iterator's products.",
  terms: [_pandaParchment.isFunction],
  iterator: function* (f, i) {
    var results, x;
    results = [];

    for (x of i) {
      results.push((yield f(x)));
    }

    return results;
  },
  reactor: async function* (f, r) {
    var results, x;
    results = [];

    for await (x of r) {
      results.push((yield f(x)));
    }

    return results;
  }
}))); // project

exports.project = project = (0, _pandaGarden.curry)(function (p, i) {
  return map((0, _pandaParchment.property)(p), i);
}); // accumulate

exports.accumulate = accumulate = (0, _pandaGarden.curry)((0, _pandaGarden.ternary)(define({
  name: "accumulate",
  description: "Apply a transformation function to an iterator's products, producing an accumulated result.",
  terms: [_pandaParchment.isFunction, isAny],
  iterator: function* (f, k, i) {
    var results, x;
    results = [];

    for (x of i) {
      results.push((yield k = f(k, x)));
    }

    return results;
  },
  reactor: async function* (f, k, r) {
    var results, x;
    results = [];

    for await (x of r) {
      results.push((yield k = f(k, x)));
    }

    return results;
  }
}))); // select

exports.select = select = exports.filter = filter = (0, _pandaGarden.curry)((0, _pandaGarden.binary)(define({
  name: "select",
  description: "Apply a filtering function to products of an iterator.",
  terms: [_pandaParchment.isFunction],
  iterator: function* (f, i) {
    var results, x;
    results = [];

    for (x of i) {
      if (f(x)) {
        results.push((yield x));
      }
    }

    return results;
  },
  reactor: async function* (f, r) {
    var results, x;
    results = [];

    for await (x of r) {
      if (f(x)) {
        results.push((yield x));
      }
    }

    return results;
  }
}))); // reject

exports.reject = reject = (0, _pandaGarden.curry)(function (f, i) {
  return select((0, _pandaGarden.negate)(f), i);
}); // compact

exports.compact = compact = select(_pandaParchment.isDefined); // tee

exports.tee = tee = (0, _pandaGarden.curry)((0, _pandaGarden.binary)(define({
  name: "tee",
  description: "Apply a function to an iterator's products, returning them.",
  terms: [_pandaParchment.isFunction],
  iterator: function* (f, i) {
    var results, x;
    results = [];

    for (x of i) {
      results.push((yield (0, _pandaGarden.tee)(f)(x)));
    }

    return results;
  },
  reactor: async function* (f, r) {
    var results, x;
    results = [];

    for await (x of r) {
      results.push((yield (0, _pandaGarden.tee)(f)(x)));
    }

    return results;
  }
}))); // partition

exports.partition = partition = (0, _pandaGarden.curry)((0, _pandaGarden.binary)(define({
  name: "partition",
  description: "Batches an interator's products in groups of N.",
  terms: [_pandaParchment.isNumber],
  iterator: function* (n, i) {
    var batch, x;
    batch = [];

    for (x of i) {
      batch.push(x);

      if (batch.length === n) {
        yield batch;
        batch = [];
      }
    }

    if (batch.length > 0) {
      return yield batch;
    }
  },
  reactor: async function* (n, r) {
    var batch, x;
    batch = [];

    for await (x of r) {
      batch.push(x);

      if (batch.length === n) {
        yield batch;
        batch = [];
      }
    }

    if (batch.length > 0) {
      return yield batch;
    }
  }
}))); // take

exports.take = take = (0, _pandaGarden.curry)((0, _pandaGarden.binary)(define({
  name: "take",
  description: "Apply a function to each product until it returns false.",
  terms: [_pandaParchment.isFunction],
  iterator: function* (f, i) {
    var results, x;
    results = [];

    for (x of i) {
      if (f(x)) {
        results.push((yield x));
      } else {
        break;
      }
    }

    return results;
  },
  reactor: async function* (f, r) {
    var results, x;
    results = [];

    for await (x of r) {
      if (f(x)) {
        results.push((yield x));
      } else {
        break;
      }
    }

    return results;
  }
}))); // limit

exports.limit = limit = function () {
  var f;

  f = function (n, i = 0) {
    return function () {
      return i++ < n;
    };
  };

  return function (n, i) {
    return take(f(n), i);
  };
}(); // pour
// TODO: generalize beyond strings
// possibly with a 2nd “combine” function?


pour = (0, _pandaGarden.curry)((0, _pandaGarden.binary)(define({
  name: "pour",
  description: "Transforms the unit of iteration, ex: from blocks to lines.",
  terms: [_pandaParchment.isFunction],
  iterator: function* (f, i) {
    var first, j, last, len, line, lines, ref, remainder, x;
    remainder = "";

    for (x of i) {
      ref = f(x), [first, ...lines] = ref, [last] = splice.call(lines, -1);
      yield remainder + first;
      remainder = last;

      for (j = 0, len = lines.length; j < len; j++) {
        line = lines[j];
        yield line;
      }
    }

    if (remainder !== "") {
      return yield remainder;
    }
  },
  reactor: async function* (f, r) {
    var first, j, last, len, line, lines, ref, remainder, x;
    remainder = "";

    for await (x of r) {
      ref = f(x), [first, ...lines] = ref, [last] = splice.call(lines, -1);
      yield remainder + first;
      remainder = last;

      for (j = 0, len = lines.length; j < len; j++) {
        line = lines[j];
        yield line;
      }
    }

    if (remainder !== "") {
      return yield remainder;
    }
  }
}))); // lines

exports.lines = lines = pour(function (s) {
  return s.toString().split("\n");
}); // throttle

exports.throttle = throttle = debounce = (0, _pandaGarden.curry)(async function* (interval, r) {
  var last, results, x;
  last = 0;
  results = [];

  for await (x of r) {
    if (Date.now() - last >= interval) {
      results.push((yield x));
    } else {
      results.push(void 0);
    }
  }

  return results;
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9kYXZpZC9yZXBvcy9wYW5kYS1yaXZlci9zcmMvZmlsdGVycy5jb2ZmZWUiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOzs7O0FBTEEsSUFBQSxVQUFBO0FBQUEsSUFBQSxPQUFBO0FBQUEsSUFBQSxRQUFBO0FBQUEsSUFBQSxNQUFBO0FBQUEsSUFBQSxNQUFBO0FBQUEsSUFBQSxLQUFBO0FBQUEsSUFBQSxLQUFBO0FBQUEsSUFBQSxLQUFBO0FBQUEsSUFBQSxHQUFBO0FBQUEsSUFBQSxTQUFBO0FBQUEsSUFBQSxJQUFBO0FBQUEsSUFBQSxPQUFBO0FBQUEsSUFBQSxNQUFBO0FBQUEsSUFBQSxNQUFBO0FBQUEsSUFBQSxJQUFBO0FBQUEsSUFBQSxHQUFBO0FBQUEsSUFBQSxRQUFBO0FBQUEsSUFBQSxNQUFBLEdBQUEsR0FBQSxNQUFBOzs7Ozs7Ozs7Ozs7Ozs7QUFPQSxLQUFBLEdBQVEsVUFBQSxDQUFBLEVBQUE7U0FBTyxJO0FBQVAsQ0FBUjs7QUFFQSxNQUFBLEdBQVMsVUFBQztBQUFBLEVBQUEsSUFBQTtBQUFBLEVBQUEsV0FBQTtBQUFBLEVBQUEsS0FBQTtBQUFBLEVBQUEsUUFBQTtBQUFELEVBQUE7QUFBQyxDQUFELEVBQUE7QUFDUCxNQUFBLENBQUE7QUFBQSxFQUFBLENBQUEsR0FBSSx1QkFBQSxNQUFBLENBQ0Y7QUFBQSxJQUFBLElBQUEsRUFBQSxJQUFBO0FBQ0EsSUFBQSxXQUFBLEVBREEsV0FBQTtBQUVBLElBQUEsT0FBQSxFQUFTLFVBQUEsR0FBQSxJQUFBLEVBQUE7QUFDUCxVQUFBLElBQUEsRUFBQSxHQUFBO29DQURpQixJLElBQUEsTUFBQSxDQUFBLElBQUEsQ0FBQSxJQUFBLEVBQUEsQ0FBQSxDQUFBLEM7O0FBQ2pCLFVBQUcsSUFBSSxDQUFKLE1BQUEsS0FBZSxLQUFLLENBQXZCLE1BQUEsRUFBQTtlQUNFLENBQUEsQ0FBRSxHQUFGLElBQUEsRUFB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QWxCO0FBQ0EsWUFBTSxTQUFBLEdBQVksS0FBbEI7QUFDQSxNQUFBLFNBQUEsR0FBWSxJQUFaOztBQUNXLFdBQUEsQ0FBQSxHQUFBLENBQUEsRUFBQSxHQUFBLEdBQUEsS0FBQSxDQUFBLE1BQUEsRUFBQSxDQUFBLEdBQUEsR0FBQSxFQUFBLENBQUEsRUFBQSxFQUFBOztBQUFYLGNBQU0sSUFBTjtBQUFXO0FBSmI7O0FBS0EsUUFBRyxTQUFBLEtBQUgsRUFBQSxFQUFBO0FBQ0UsYUFBQSxNQURGLFNBQ0U7O0FBUks7QUFaVCxDQURrQixDQUFQLENBQU4sQ0FBUCxDOztBQXlCQSxnQkFBQSxLQUFBLEdBQVEsSUFBQSxDQUFLLFVBQUEsQ0FBQSxFQUFBO1NBQU8sQ0FBQyxDQUFELFFBQUEsR0FBQSxLQUFBLENBQUEsSUFBQSxDO0FBNUpwQixDQTRKUSxDQUFSLEM7O0FBSUEsbUJBQUEsUUFBQSxHQUFXLFFBQUEsR0FBVyx3QkFBTSxpQkFBQSxRQUFBLEVBQUEsQ0FBQSxFQUFBO0FBQzFCLE1BQUEsSUFBQSxFQUFBLE9BQUEsRUFBQSxDQUFBO0FBQUEsRUFBQSxJQUFBLEdBQU8sQ0FBUDtBQUNBLEVBQUEsT0FBQSxHQUFBLEVBQUE7O0FBQUEsYUFBQSxDQUFBLElBQUEsQ0FBQSxFQUFBO0FBQ0UsUUFBSSxJQUFJLENBQUosR0FBQSxLQUFELElBQUEsSUFBSCxRQUFBLEVBQUE7Y0FDRSxJLEVBQUEsTUFERixDO0FBQUEsS0FBQSxNQUFBO3dCQUFBLEM7O0FBREY7OztBQUZvQixDQUFBLENBQXRCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtpc0Z1bmN0aW9uLCBpc0RlZmluZWQsIGlzTnVtYmVyLCBwcm9wZXJ0eX0gZnJvbSBcInBhbmRhLXBhcmNobWVudFwiXG5pbXBvcnQge2N1cnJ5LCBiaW5hcnksIHRlcm5hcnksIG5lZ2F0ZSwgdGVlIGFzIF90ZWV9IGZyb20gXCJwYW5kYS1nYXJkZW5cIlxuaW1wb3J0IE1ldGhvZCBmcm9tIFwicGFuZGEtZ2VuZXJpY3NcIlxuaW1wb3J0IHtpc0l0ZXJhdG9yfSBmcm9tIFwiLi9pdGVyYXRvclwiXG5pbXBvcnQge2lzUmVhY3Rvcn0gZnJvbSBcIi4vcmVhY3RvclwiXG5pbXBvcnQge3Byb2R1Y2VyfSBmcm9tIFwiLi9hZGFwdGVyc1wiXG5cbmlzQW55ID0gKHgpIC0+IHRydWVcblxuZGVmaW5lID0gKHtuYW1lLCBkZXNjcmlwdGlvbiwgdGVybXMsIGl0ZXJhdG9yLCByZWFjdG9yfSkgLT5cbiAgZiA9IE1ldGhvZC5jcmVhdGVcbiAgICBuYW1lOiBuYW1lXG4gICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uXG4gICAgZGVmYXVsdDogKGFyZ3MuLi4sIGxhc3QpIC0+XG4gICAgICBpZiBhcmdzLmxlbmd0aCA9PSB0ZXJtcy5sZW5ndGhcbiAgICAgICAgZiBhcmdzLi4uLCBwcm9kdWNlciBsYXN0XG4gICAgICBlbHNlXG4gICAgICAgIHRocm93IFwiI3tuYW1lfTogd3JvbmcgbnVtYmVyIG9mIGFyZ3VtZW50c1wiXG5cbiAgTWV0aG9kLmRlZmluZSBmLCB0ZXJtcy4uLiwgaXNJdGVyYXRvciwgaXRlcmF0b3JcbiAgTWV0aG9kLmRlZmluZSBmLCB0ZXJtcy4uLiwgaXNSZWFjdG9yLCByZWFjdG9yXG4gIGZcblxuIyBtYXBcblxubWFwID0gY3VycnkgYmluYXJ5IGRlZmluZVxuICBuYW1lOiBcIm1hcFwiXG4gIGRlc2NyaXB0aW9uOiBcIkFwcGx5IGEgdHJhbnNmb3JtYXRpb24gZnVuY3Rpb24gdG8gYW4gaXRlcmF0b3IncyBwcm9kdWN0cy5cIlxuICB0ZXJtczogWyBpc0Z1bmN0aW9uIF1cbiAgaXRlcmF0b3I6IChmLCBpKSAtPiB5aWVsZCAoZiB4KSBmb3IgeCBmcm9tIGlcbiAgcmVhY3RvcjogKGYsIHIpIC0+IHlpZWxkIChmIHgpIGZvciBhd2FpdCB4IGZyb20gclxuXG4jIHByb2plY3RcblxucHJvamVjdCA9IGN1cnJ5IChwLCBpKSAtPiBtYXAgKHByb3BlcnR5IHApLCBpXG5cbiMgYWNjdW11bGF0ZVxuXG5hY2N1bXVsYXRlID0gY3VycnkgdGVybmFyeSBkZWZpbmVcbiAgbmFtZTogXCJhY2N1bXVsYXRlXCJcbiAgZGVzY3JpcHRpb246IFwiQXBwbHkgYSB0cmFuc2Zvcm1hdGlvbiBmdW5jdGlvbiB0byBhbiBpdGVyYXRvcidzIHByb2R1Y3RzLFxuICAgIHByb2R1Y2luZyBhbiBhY2N1bXVsYXRlZCByZXN1bHQuXCJcbiAgdGVybXM6IFsgaXNGdW5jdGlvbiwgaXNBbnkgXVxuICBpdGVyYXRvcjogKGYsIGssIGkpIC0+IHlpZWxkIChrID0gZiBrLCB4KSBmb3IgeCBmcm9tIGlcbiAgcmVhY3RvcjogKGYsIGssIHIpIC0+IHlpZWxkIChrID0gZiBrLCB4KSBmb3IgYXdhaXQgeCBmcm9tIHJcblxuIyBzZWxlY3Rcblxuc2VsZWN0ID0gZmlsdGVyID0gY3VycnkgYmluYXJ5IGRlZmluZVxuICBuYW1lOiBcInNlbGVjdFwiXG4gIGRlc2NyaXB0aW9uOiBcIkFwcGx5IGEgZmlsdGVyaW5nIGZ1bmN0aW9uIHRvIHByb2R1Y3RzIG9mIGFuIGl0ZXJhdG9yLlwiXG4gIHRlcm1zOiBbIGlzRnVuY3Rpb24gXVxuICBpdGVyYXRvcjogKGYsIGkpIC0+IHlpZWxkIHggZm9yIHggZnJvbSBpIHdoZW4gZiB4XG4gIHJlYWN0b3I6IChmLCByKSAtPiB5aWVsZCB4IGZvciBhd2FpdCB4IGZyb20gciB3aGVuIGYgeFxuXG4jIHJlamVjdFxuXG5yZWplY3QgPSBjdXJyeSAoZiwgaSkgLT4gc2VsZWN0IChuZWdhdGUgZiksIGlcblxuIyBjb21wYWN0XG5cbmNvbXBhY3QgPSBzZWxlY3QgaXNEZWZpbmVkXG5cbiMgdGVlXG5cbnRlZSA9IGN1cnJ5IGJpbmFyeSBkZWZpbmVcbiAgbmFtZTogXCJ0ZWVcIlxuICBkZXNjcmlwdGlvbjogXCJBcHBseSBhIGZ1bmN0aW9uIHRvIGFuIGl0ZXJhdG9yJ3MgcHJvZHVjdHMsIHJldHVybmluZyB0aGVtLlwiXG4gIHRlcm1zOiBbIGlzRnVuY3Rpb24gXVxuICBpdGVyYXRvcjogKGYsIGkpIC0+IHlpZWxkICgoX3RlZSBmKSB4KSBmb3IgeCBmcm9tIGlcbiAgcmVhY3RvcjogKGYsIHIpIC0+IHlpZWxkICgoX3RlZSBmKSB4KSBmb3IgYXdhaXQgeCBmcm9tIHJcblxuIyBwYXJ0aXRpb25cblxucGFydGl0aW9uID0gY3VycnkgYmluYXJ5IGRlZmluZVxuICBuYW1lOiBcInBhcnRpdGlvblwiXG4gIGRlc2NyaXB0aW9uOiBcIkJhdGNoZXMgYW4gaW50ZXJhdG9yJ3MgcHJvZHVjdHMgaW4gZ3JvdXBzIG9mIE4uXCJcbiAgdGVybXM6IFsgaXNOdW1iZXIgXVxuXG4gIGl0ZXJhdG9yOihuLCBpKSAtPlxuICAgIGJhdGNoID0gW11cbiAgICBmb3IgeCBmcm9tIGlcbiAgICAgIGJhdGNoLnB1c2ggeFxuICAgICAgaWYgYmF0Y2gubGVuZ3RoID09IG5cbiAgICAgICAgeWllbGQgYmF0Y2hcbiAgICAgICAgYmF0Y2ggPSBbXVxuICAgIGlmIGJhdGNoLmxlbmd0aCA+IDBcbiAgICAgIHlpZWxkIGJhdGNoXG5cbiAgcmVhY3RvcjogKG4sIHIpIC0+XG4gICAgYmF0Y2ggPSBbXVxuICAgIGZvciBhd2FpdCB4IGZyb20gclxuICAgICAgYmF0Y2gucHVzaCB4XG4gICAgICBpZiBiYXRjaC5sZW5ndGggPT0gblxuICAgICAgICB5aWVsZCBiYXRjaFxuICAgICAgICBiYXRjaCA9IFtdXG4gICAgaWYgYmF0Y2gubGVuZ3RoID4gMFxuICAgICAgeWllbGQgYmF0Y2hcblxuIyB0YWtlXG5cbnRha2UgPSBjdXJyeSBiaW5hcnkgZGVmaW5lXG4gIG5hbWU6IFwidGFrZVwiXG4gIGRlc2NyaXB0aW9uOiBcIkFwcGx5IGEgZnVuY3Rpb24gdG8gZWFjaCBwcm9kdWN0IHVudGlsIGl0IHJldHVybnMgZmFsc2UuXCJcbiAgdGVybXM6IFsgaXNGdW5jdGlvbiBdXG5cbiAgaXRlcmF0b3I6IChmLCBpKSAtPlxuICAgIGZvciB4IGZyb20gaVxuICAgICAgaWYgZiB4XG4gICAgICAgIHlpZWxkIHhcbiAgICAgIGVsc2VcbiAgICAgICAgYnJlYWtcblxuICByZWFjdG9yOiAoZiwgcikgLT5cbiAgICBmb3IgYXdhaXQgeCBmcm9tIHJcbiAgICAgIGlmIGYgeFxuICAgICAgICB5aWVsZCB4XG4gICAgICBlbHNlXG4gICAgICAgIGJyZWFrXG5cbiMgbGltaXRcblxubGltaXQgPSBkbyAtPlxuICBmID0gKG4sIGkgPSAwKSAtPiAtPiBpKysgPCBuXG4gIChuLCBpKSAtPiB0YWtlIChmIG4pLCBpXG5cbiMgcG91clxuXG4jIFRPRE86IGdlbmVyYWxpemUgYmV5b25kIHN0cmluZ3NcbiMgcG9zc2libHkgd2l0aCBhIDJuZCDigJxjb21iaW5l4oCdIGZ1bmN0aW9uP1xuXG5wb3VyID0gY3VycnkgYmluYXJ5IGRlZmluZVxuICBuYW1lOiBcInBvdXJcIlxuICBkZXNjcmlwdGlvbjogXCJUcmFuc2Zvcm1zIHRoZSB1bml0IG9mIGl0ZXJhdGlvbiwgZXg6IGZyb20gYmxvY2tzIHRvIGxpbmVzLlwiXG4gIHRlcm1zOiBbIGlzRnVuY3Rpb24gXVxuICBpdGVyYXRvcjogKGYsIGkpIC0+XG4gICAgcmVtYWluZGVyID0gXCJcIlxuICAgIGZvciB4IGZyb20gaVxuICAgICAgW2ZpcnN0LCBsaW5lcy4uLiwgbGFzdF0gPSBmIHhcbiAgICAgIHlpZWxkIHJlbWFpbmRlciArIGZpcnN0XG4gICAgICByZW1haW5kZXIgPSBsYXN0XG4gICAgICB5aWVsZCBsaW5lIGZvciBsaW5lIGluIGxpbmVzXG4gICAgaWYgcmVtYWluZGVyICE9IFwiXCJcbiAgICAgIHlpZWxkIHJlbWFpbmRlclxuICByZWFjdG9yOiAoZiwgcikgLT5cbiAgICByZW1haW5kZXIgPSBcIlwiXG4gICAgZm9yIGF3YWl0IHggZnJvbSByXG4gICAgICBbZmlyc3QsIGxpbmVzLi4uLCBsYXN0XSA9IGYgeFxuICAgICAgeWllbGQgcmVtYWluZGVyICsgZmlyc3RcbiAgICAgIHJlbWFpbmRlciA9IGxhc3RcbiAgICAgIHlpZWxkIGxpbmUgZm9yIGxpbmUgaW4gbGluZXNcbiAgICBpZiByZW1haW5kZXIgIT0gXCJcIlxuICAgICAgeWllbGQgcmVtYWluZGVyXG5cbiMgbGluZXNcblxubGluZXMgPSBwb3VyIChzKSAtPiBzLnRvU3RyaW5nKCkuc3BsaXQoXCJcXG5cIilcblxuIyB0aHJvdHRsZVxuXG50aHJvdHRsZSA9IGRlYm91bmNlID0gY3VycnkgKGludGVydmFsLCByKSAtPlxuICBsYXN0ID0gMFxuICBmb3IgYXdhaXQgeCBmcm9tIHJcbiAgICBpZiAoRGF0ZS5ub3coKSAtIGxhc3QpID49IGludGVydmFsXG4gICAgICB5aWVsZCB4XG5cbmV4cG9ydCB7bWFwLCBwcm9qZWN0LCBhY2N1bXVsYXRlLCBzZWxlY3QsIGZpbHRlciwgcmVqZWN0LCBjb21wYWN0LFxuICB0ZWUsIHBhcnRpdGlvbiwgdGFrZSwgbGltaXQsIGxpbmVzLCB0aHJvdHRsZX1cbiJdLCJzb3VyY2VSb290IjoiIn0=
//# sourceURL=/Users/david/repos/panda-river/src/filters.coffee