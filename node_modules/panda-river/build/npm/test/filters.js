"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

var _amen = require("amen");

var _filters = require("../src/filters");

var add, assert, follow, merge, odd, spec, square;
assert = require("assert");
({
  odd,
  merge,
  follow
} = require("panda-parchment")); // we need to do things with the values

square = function (x) {
  return x * x;
};

add = function (x, y) {
  return x + y;
};

spec = function (name, {
  expected,
  filter,
  iterable
}) {
  return (0, _amen.test)(name, [(0, _amen.test)("iterator", function () {
    var x;
    return assert.deepEqual(expected, function () {
      var ref, results;
      ref = filter(iterable);
      results = [];

      for (x of ref) {
        results.push(x);
      }

      return results;
    }());
  }), (0, _amen.test)("reactor", async function () {
    var r, x;

    r = async function* () {
      var results, x;
      results = [];

      for await (x of iterable) {
        results.push((yield x));
      }

      return results;
    };

    return assert.deepEqual(expected, (await async function () {
      var ref, results;
      ref = filter(r);
      results = [];

      for await (x of ref) {
        results.push(x);
      }

      return results;
    }()));
  })]);
};

var _default = [spec("map", {
  expected: [1, 4, 9, 16],
  filter: (0, _filters.map)(square),
  iterable: [1, 2, 3, 4]
}), spec("accumulate", {
  expected: [1, 3, 6, 10],
  filter: (0, _filters.accumulate)(add, 0),
  iterable: [1, 2, 3, 4]
}), spec("select", {
  expected: [1, 3, 5],
  filter: (0, _filters.select)(odd),
  iterable: [1, 2, 3, 4, 5]
}), spec("tee", {
  expected: [1, 2, 3, 4],
  filter: (0, _filters.tee)(square),
  iterable: [1, 2, 3, 4]
}), spec("partition", {
  expected: [[1, 2], [3, 4]],
  filter: (0, _filters.partition)(2),
  iterable: [1, 2, 3, 4]
}), spec("take", {
  expected: [1, 2, 3],
  filter: (0, _filters.take)(function (x) {
    return x <= 3;
  }),
  iterable: [1, 2, 3, 4]
}), (0, _amen.test)("throttle"), spec("lines", {
  expected: ["one", "two", "three"],
  filter: _filters.lines,
  iterable: ["one\ntwo", "\nthree"]
})];
exports.default = _default;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9kYXZpZC9yZXBvcy9wYW5kYS1yaXZlci90ZXN0L2ZpbHRlcnMuY29mZmVlIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQTs7QUFHQTs7QUFIQSxJQUFBLEdBQUEsRUFBQSxNQUFBLEVBQUEsTUFBQSxFQUFBLEtBQUEsRUFBQSxHQUFBLEVBQUEsSUFBQSxFQUFBLE1BQUE7QUFDQSxNQUFBLEdBQVMsT0FBQSxDQUFBLFFBQUEsQ0FBVDtBQUtBLENBQUE7QUFBQSxFQUFBLEdBQUE7QUFBQSxFQUFBLEtBQUE7QUFBQSxFQUFBO0FBQUEsSUFBdUIsT0FBQSxDQU52QixpQkFNdUIsQ0FBdkIsRTs7QUFHQSxNQUFBLEdBQVMsVUFBQSxDQUFBLEVBQUE7U0FBTyxDQUFBLEdBQUksQztBQUFYLENBQVQ7O0FBQ0EsR0FBQSxHQUFNLFVBQUEsQ0FBQSxFQUFBLENBQUEsRUFBQTtTQUFVLENBQUEsR0FBSSxDO0FBQWQsQ0FBTjs7QUFFQSxJQUFBLEdBQU8sVUFBQSxJQUFBLEVBQU87QUFBQSxFQUFBLFFBQUE7QUFBQSxFQUFBLE1BQUE7QUFBUCxFQUFBO0FBQU8sQ0FBUCxFQUFBO1NBRUwsZ0JBQUEsSUFBQSxFQUFXLENBQ1QsZ0JBQUEsVUFBQSxFQUFpQixZQUFBO0FBQ2YsUUFBQSxDQUFBO1dBQUEsTUFBTSxDQUFOLFNBQUEsQ0FBQSxRQUFBLEU7O0FBQ0ssTUFBQSxHQUFBLEdBQUEsTUFBQSxDQUFBLFFBQUEsQ0FBQTtBQUFBLE1BQUEsT0FBQSxHQUFBLEVBQUE7O0FBQUEsV0FBQSxDQUFBLElBQUEsR0FBQSxFQUFBO3FCQUFGLEM7QUFBRTs7O0FBREwsSyxFQUFBLEM7QUFGTyxHQUNULENBRFMsRUFLVCxnQkFBQSxTQUFBLEVBQWdCLGtCQUFBO0FBQ2QsUUFBQSxDQUFBLEVBQUEsQ0FBQTs7QUFBQSxJQUFBLENBQUEsR0FBSSxtQkFBQTtBQUFHLFVBQUEsT0FBQSxFQUFBLENBQUE7QUFBUSxNQUFBLE9BQUEsR0FBQSxFQUFBOztBQUFB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cXVpcmUgXCJhc3NlcnRcIlxuXG5pbXBvcnQge21hcCwgcHJvamVjdCwgYWNjdW11bGF0ZSwgc2VsZWN0LCBmaWx0ZXIsIHJlamVjdCwgY29tcGFjdCxcbiAgdGVlLCBwYXJ0aXRpb24sIHRha2UsIGxpbWl0LCBsaW5lcywgdGhyb3R0bGV9IGZyb20gXCIuLi9zcmMvZmlsdGVyc1wiXG5cbntvZGQsIG1lcmdlLCBmb2xsb3d9ID0gcmVxdWlyZSBcInBhbmRhLXBhcmNobWVudFwiXG5cbiMgd2UgbmVlZCB0byBkbyB0aGluZ3Mgd2l0aCB0aGUgdmFsdWVzXG5zcXVhcmUgPSAoeCkgLT4geCAqIHhcbmFkZCA9ICh4LCB5KSAtPiB4ICsgeVxuXG5zcGVjID0gKG5hbWUsIHtleHBlY3RlZCwgZmlsdGVyLCBpdGVyYWJsZX0pIC0+XG5cbiAgdGVzdCBuYW1lLCBbXG4gICAgdGVzdCBcIml0ZXJhdG9yXCIsIC0+XG4gICAgICBhc3NlcnQuZGVlcEVxdWFsIGV4cGVjdGVkLFxuICAgICAgICAoeCBmb3IgeCBmcm9tIGZpbHRlciBpdGVyYWJsZSlcblxuICAgIHRlc3QgXCJyZWFjdG9yXCIsIC0+XG4gICAgICByID0gLT4geWllbGQgeCBmb3IgYXdhaXQgeCBmcm9tIGl0ZXJhYmxlXG4gICAgICBhc3NlcnQuZGVlcEVxdWFsIGV4cGVjdGVkLFxuICAgICAgICAoeCBmb3IgYXdhaXQgeCBmcm9tIGZpbHRlciByKVxuICBdXG5cbmV4cG9ydCBkZWZhdWx0IFtcblxuICBzcGVjIFwibWFwXCIsXG4gICAgZXhwZWN0ZWQ6IFsxLCA0LCA5LCAxNl1cbiAgICBmaWx0ZXI6IG1hcCBzcXVhcmVcbiAgICBpdGVyYWJsZTogWzEuLjRdXG5cbiAgc3BlYyBcImFjY3VtdWxhdGVcIixcbiAgICBleHBlY3RlZDogWzEsIDMsIDYsIDEwXVxuICAgIGZpbHRlcjogYWNjdW11bGF0ZSBhZGQsIDBcbiAgICBpdGVyYWJsZTogWzEuLjRdXG5cbiAgc3BlYyBcInNlbGVjdFwiLFxuICAgIGV4cGVjdGVkOiBbMSwgMywgNV1cbiAgICBmaWx0ZXI6IHNlbGVjdCBvZGRcbiAgICBpdGVyYWJsZTogWzEuLjVdXG5cbiAgc3BlYyBcInRlZVwiLFxuICAgIGV4cGVjdGVkOiBbMS4uNF1cbiAgICBmaWx0ZXI6IHRlZSBzcXVhcmVcbiAgICBpdGVyYWJsZTogWzEuLjRdXG5cbiAgc3BlYyBcInBhcnRpdGlvblwiLFxuICAgIGV4cGVjdGVkOiBbWzEsIDJdLCBbMywgNF1dXG4gICAgZmlsdGVyOiBwYXJ0aXRpb24gMlxuICAgIGl0ZXJhYmxlOiBbMS4uNF1cblxuICBzcGVjIFwidGFrZVwiLFxuICAgIGV4cGVjdGVkOiBbMS4uM11cbiAgICBmaWx0ZXI6IHRha2UgKHgpIC0+IHggPD0gM1xuICAgIGl0ZXJhYmxlOiBbMS4uNF1cblxuICB0ZXN0IFwidGhyb3R0bGVcIlxuXG4gIHNwZWMgXCJsaW5lc1wiLFxuICAgIGV4cGVjdGVkOiBbIFwib25lXCIsIFwidHdvXCIsIFwidGhyZWVcIiBdXG4gICAgZmlsdGVyOiBsaW5lc1xuICAgIGl0ZXJhYmxlOiBbIFwib25lXFxudHdvXCIsIFwiXFxudGhyZWVcIiBdXG5cbl1cbiJdLCJzb3VyY2VSb290IjoiIn0=
//# sourceURL=/Users/david/repos/panda-river/test/filters.coffee