"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.shuffle = void 0;

var _array = require("./array");

var _equal = require("./equal");

// Array functions that pull from other parchment primitives.
var floor, random, shuffle;
exports.shuffle = shuffle;
({
  floor,
  random
} = Math); // https://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle

exports.shuffle = shuffle = function (ax) {
  var bx, i, j;
  bx = (0, _array.cat)(ax);
  i = bx.length;

  if (!(i <= 1)) {
    while (--i > 0) {
      // the distinguishing characteristic of fisher-yates is that the random
      // value generated is bounded by the iterator index (Math.random() * i)
      // instead of the size of the array (Math.random() * bx.length)
      j = floor(random() * (i + 1));
      [bx[i], bx[j]] = [bx[j], bx[i]];
    }

    if ((0, _equal.equal)(ax, bx)) {
      return shuffle(ax);
    } else {
      return bx;
    }
  } else {
    return bx;
  }
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9kYXZpZC9yZXBvcy9wYW5kYS1wYXJjaG1lbnQvc3JjL2FycmF5LWFkdmFuY2VkLmNvZmZlZSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQ0E7O0FBQ0E7O0FBRkE7QUFBQSxJQUFBLEtBQUEsRUFBQSxNQUFBLEVBQUEsT0FBQTs7QUFJQSxDQUFBO0FBQUEsRUFBQSxLQUFBO0FBQUEsRUFBQTtBQUFBLElBSkEsSUFJQSxFOztBQUlBLGtCQUFBLE9BQUEsR0FBVSxVQUFBLEVBQUEsRUFBQTtBQUNSLE1BQUEsRUFBQSxFQUFBLENBQUEsRUFBQSxDQUFBO0FBQUEsRUFBQSxFQUFBLEdBQUssZ0JBQUEsRUFBQSxDQUFMO0FBQ0EsRUFBQSxDQUFBLEdBQUksRUFBRSxDQUFDLE1BQVA7O0FBQ0EsTUFBQSxFQUFPLENBQUEsSUFBUCxDQUFBLENBQUEsRUFBQTtBQUNFLFdBQU0sRUFBQSxDQUFBLEdBQU4sQ0FBQSxFQUFBOzs7O0FBSUUsTUFBQSxDQUFBLEdBQUksS0FBQSxDQUFNLE1BQUEsTUFBWSxDQUFBLEdBQWxCLENBQU0sQ0FBTixDQUFKO0FBQ0EsT0FBQyxFQUFHLENBQUosQ0FBSSxDQUFKLEVBQVEsRUFBRyxDQUFYLENBQVcsQ0FBWCxJQUFpQixDQUFDLEVBQUcsQ0FBSixDQUFJLENBQUosRUFBUSxFQUFHLENBQVgsQ0FBVyxDQUFYLENBQWpCO0FBTEY7O0FBTUEsUUFBRyxrQkFBQSxFQUFBLEVBQUgsRUFBRyxDQUFILEVBQUE7YUFBcUIsT0FBQSxDQUFyQixFQUFxQixDO0FBQXJCLEtBQUEsTUFBQTthQUFBLEU7QUFQRjtBQUFBLEdBQUEsTUFBQTtXQUFBLEU7O0FBSFEsQ0FBViIsInNvdXJjZXNDb250ZW50IjpbIiMgQXJyYXkgZnVuY3Rpb25zIHRoYXQgcHVsbCBmcm9tIG90aGVyIHBhcmNobWVudCBwcmltaXRpdmVzLlxuaW1wb3J0IHtjYXR9IGZyb20gXCIuL2FycmF5XCJcbmltcG9ydCB7ZXF1YWx9IGZyb20gXCIuL2VxdWFsXCJcblxue2Zsb29yLCByYW5kb219ID0gTWF0aFxuXG4jIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL0Zpc2hlciVFMiU4MCU5M1lhdGVzX3NodWZmbGVcbiNcbnNodWZmbGUgPSAoYXgpIC0+XG4gIGJ4ID0gY2F0IGF4XG4gIGkgPSBieC5sZW5ndGhcbiAgdW5sZXNzIGkgPD0gMVxuICAgIHdoaWxlIC0taSA+IDBcbiAgICAgICMgdGhlIGRpc3Rpbmd1aXNoaW5nIGNoYXJhY3RlcmlzdGljIG9mIGZpc2hlci15YXRlcyBpcyB0aGF0IHRoZSByYW5kb21cbiAgICAgICMgdmFsdWUgZ2VuZXJhdGVkIGlzIGJvdW5kZWQgYnkgdGhlIGl0ZXJhdG9yIGluZGV4IChNYXRoLnJhbmRvbSgpICogaSlcbiAgICAgICMgaW5zdGVhZCBvZiB0aGUgc2l6ZSBvZiB0aGUgYXJyYXkgKE1hdGgucmFuZG9tKCkgKiBieC5sZW5ndGgpXG4gICAgICBqID0gZmxvb3IgcmFuZG9tKCkgKiAoaSArIDEpXG4gICAgICBbYnhbaV0sIGJ4W2pdXSA9IFtieFtqXSwgYnhbaV1dXG4gICAgaWYgZXF1YWwgYXgsIGJ4IHRoZW4gc2h1ZmZsZSBheCBlbHNlIGJ4XG4gIGVsc2VcbiAgICBieFxuXG5leHBvcnQge3NodWZmbGV9XG4iXSwic291cmNlUm9vdCI6IiJ9
//# sourceURL=/Users/david/repos/panda-parchment/src/array-advanced.coffee